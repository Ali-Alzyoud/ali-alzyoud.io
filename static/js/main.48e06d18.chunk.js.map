{"version":3,"sources":["redux/actionTypes.js","redux/reducers/sceneFilter.js","redux/reducers/media.js","redux/reducers/settings.js","redux/reducers/index.js","redux/store.js","common/SrtClass.js","common/SceneGuide.js","redux/selectors.js","redux/actions.js","Components/Slider/index.js","Components/Slider/Slider.js","Components/Player/VideoControls.js","Components/Player/VideoFilter.js","Components/Player/VideoSRT.js","Components/Player/VideoPlayer.js","Components/About/index.js","Components/About/About.js","Components/Settings/Settings.js","Components/Settings/index.js","Components/FilterPicker/FileRecord.js","common/API/API.js","Components/Loader/index.js","Components/Loader/Loader.js","Components/FilterPicker/FilterPicker.js","Components/FilterPicker/index.js","Components/Menu/Menu.js","Components/Menu/index.js","Components/FilterFileEditor/FilterRecord.js","Components/FilterFileEditor/FilterFileEditor.js","Components/FilterFileEditor/index.js","Components/ConfigEditor/ConfigEditor.js","Components/ConfigEditor/index.js","Components/ToggleButton/index.js","Components/ToggleButton/ToggleButton.js","App.js","reportWebVitals.js","index.js"],"names":["SET_SUBTITLE","VIDEO_SRC","VIDEO_SRC_NAME","VIDEO_IS_LOADING","SET_TIME","SET_DURATION","SET_VOLUME","SET_MUTE","SET_SPEED","SET_PLAYER_STATE","SET_PLAYER_CONFIG","ADD_ITEMS","SET_ITEMS","REMOVE_ITEM_INDEX","REMOVE_ALL","UPDATE_ITEM","SET_FONT_CONFIG","SET_MODAL_OPEN","PLAYER_ACTION","initialState","records","SceneFilter","state","action","type","payload","length","index","newRecords","filter","record","i","map","r","playerConfigJSON","localStorage","getItem","subtitle","videoSrc","videoName","time","duration","volume","mute","speed","playerState","playerConfig","JSON","parse","violence","nudity","profanity","Media","videoIsLoading","Math","max","min","limitedVolume","setItem","stringify","fontConfigJSON","fontConfig","size","transparency","modalOpen","isLoading","Settings","combineReducers","sceneFilter","media","settings","createStore","rootReducer","SrtRecord","lines","timeFields","split","this","from","ConvertToTime","to","content","contentValue","push","ResolveTags","str","strs","replace","Number","SrtClass","url","recordsRaw","fetch","response","text","data","recordIndex","includes","SceneIntensity","High","Low","SceneType","Violence","Nudity","Profanity","FromString","value","ToString","toLowerCase","id","SceneGuideRecord","intensity","From","To","Type","Intensity","v","fromString","prototype","toString","ContainTime","fromArray","toArray","fromTime","toTime","containTime","setFromTime","hour","floor","sec","toFixed","setToTime","endTime","SceneGuideClass","replaceAll","array","slice","GetRecordsAtTime","ret","selectRecords","selectSubtitle","selectVideoSrc","selectVideoName","selectTime","selectDuration","selectPlayerConfig","selectVolume","selectMute","selectSpeed","selectPlayerState","selectModalOpen","selectVideoIsLoading","getFontConfig","getSubtitleAtTime","store","getState","GetContentAt","setSubtitle","setVideoSrc","setVideoName","setTime","setDuration","setVolume","setPlayerState","addFilterItems","setFilterItems","Slider","setValue","ref","useRef","className","onClick","e","stopPropagation","rect","current","getBoundingClientRect","y","clientY","top","height","style","position","width","background","bottom","color","marginTop","styleControls","zIndex","opacity","transition","left","seekbarStyle","margin","seekbarStyleProgress","seekhandleStyle","marginLeft","borderRadius","border","seekbuttonStyle","KEY","PlayIcon","MdPlayArrow","connect","isMute","visible","onFullscreen","seekbutton","seekbar","timeLabel","useState","styleHandle","setStyleHandle","styleButton","setStyleButton","styleProgress","progress","setProgress","keyEvent","setKeyEvent","timeToString","h","m","s","useEffect","innerHTML","jump","shiftKey","ctrlKey","altKey","keyCode","onPlayClick","handleKeyDown","window","addEventListener","removeEventListener","mouseMove","updateSeek","clientX","mousein","cursor","mouseout","x","cleanDocEvents","document","onpointermove","onpointerup","MdPause","event","player_controls","alt","onPointerEnter","onPointerLeave","onPointerDown","onPointerUp","onclick","right","paintOrder","strokeWidth","stroke","FilterStyle","pointerEvents","setMute","setSpeed","blackScreen","setStyle","currentRecords","getRecordsAtTime","skip","black","blur","blurExtra","blurExtreme","doubleSpeed","skipRecord","backdropFilter","fontSize","backgroundColor","fontTransparency","parser","join","debounce","func1","func","delay","inDebounce","context","args","arguments","clearTimeout","setTimeout","apply","VideoPlayer","props","fullscreenElement","exitFullscreen","player","parentElement","requestFullscreen","render","setVideoIsLoading","onPointerMove","setState","hideTimer","paused","clickCount","timer","onWheel","deltaY","button","src","onLoadedData","getCurrentTime","target","onSeeking","currentTime","onSeeked","onTimeUpdate","display","gridTemplateRows","control","playAction","createRef","localStorageUpdateCounter","progressSave","setInterval","clearInterval","prevProps","prevState","abs","play","pause","playbackRate","React","PureComponent","About","close","href","setSettings_fontConfig","fontBackground","fontConfigClone","round","FileRecord","imgSrc","title","link","isSelected","select","copy","readyToPlay","open","flex","flexFlow","textAlign","endpoint","URLS","a","Date","now","method","status","json","result","Loader","FilterPicker","setModalOpen","recordsItems","setRecordsItems","selectedIndex","setSelectedIndex","filterText","setFilterText","selectedRecord","endPointURL","isAbsoluteLink","API","ReadFile","then","filterSrc","video","fileName","location","origin","btoa","onChange","preventDefault","item","img","movie","undefined","alignContent","Menu","videoInput","subtitleInput","filterInput","videoInputURL","subtitleInputURL","filterInputURL","key","setkey","about","setabout","setSettings","filterPicker","setfilterPicker","setFiles","res","files","URL","createObjectURL","name","filterURL","click","vidURL","subURL","filURL","FilterRecord","removeItem","selectItem","updateItem","fromDates","toDates","fh","fm","fs","th","tm","ts","inputChange","newState","onBlur","onBlurCapture","selected","FilterFileEditor","removeFilterIndex","removeAllFilters","updateFilterItem","setSelectedRecord","setKey","addItem","saveItems","selectime","indexOf","element","createElement","file","Blob","download","body","appendChild","ConfigEditor","setPlayerConfig","secondValue","onChange2","firstValue","options_video","options_audio","option","ToggleButton","on","children","class","checked","showEditor","setShowEditor","showConfig","setShowConfig","loadAll","videoURL","subtitleURL","paramsURL","hash","params","atob","startsWith","onhashchange","transform","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"sfAAaA,EAAe,eACfC,EAAY,YACZC,EAAiB,iBACjBC,EAAmB,mBACnBC,EAAW,WACXC,EAAe,eACfC,EAAa,aACbC,EAAW,WACXC,EAAY,YACZC,EAAmB,mBACnBC,EAAoB,oBACpBC,EAAY,YACZC,EAAY,YACZC,EAAoB,oBACpBC,EAAa,aACbC,EAAc,cACdC,EAAkB,kBAClBC,EAAiB,iBAEjBC,EACF,OADEA,EAEI,aAFJA,EAGM,eAHNA,EAIS,kBAJTA,EAKD,eALCA,EAMF,OANEA,EAOF,OAPEA,EAQE,YCzBTC,EAAe,CACnBC,QAAS,IA8CIC,EA3CK,WAAmC,IAAlCC,EAAiC,uDAAzBH,EAAcI,EAAW,uCACpD,OAAQA,EAAOC,MACb,KAAKb,EACH,IAAQS,EAAYG,EAAOE,QAAnBL,QACR,OAAO,2BACFE,GADL,IAEEF,QAAQ,GAAD,mBAAMA,GAAN,YAAkBE,EAAMF,YAGnC,KAAKR,EACH,IAAQQ,EAAYG,EAAOE,QAAnBL,QACR,OAAO,2BACFE,GADL,IAEEF,QAAUA,GAAWA,EAAQM,OAAS,EAA7B,YAAsCN,GAAW,KAG9D,KAAKP,EACD,IAAQc,EAAUJ,EAAOE,QAAjBE,MACFC,EAAaN,EAAMF,QAAQS,QAAO,SAACC,EAAQC,GAAT,OAAeA,IAAIJ,KAC3D,OAAO,2BACFL,GADL,IAEEF,QAAQ,YAAKQ,KAGnB,KAAKd,EACD,OAAO,2BACFQ,GADL,IAEEF,QAAS,KAGf,KAAKL,EACD,MAA0BQ,EAAOE,QAAzBE,EAAR,EAAQA,MAAOG,EAAf,EAAeA,OACTF,EAAaN,EAAMF,QAAQY,KAAI,SAACC,EAAGF,GAAJ,OAAUA,IAAIJ,EAAQG,EAASG,KACpE,OAAO,2BACFX,GADL,IAEEF,QAAQ,YAAKQ,KAGnB,QACE,OAAON,IC1CPY,EAAmBC,aAAaC,QAAQ,gBAOxCjB,EAAe,CACnBkB,SAAU,GACVC,SAAU,KACVC,UAAW,GACXC,KAAM,EACNC,SAAU,EACVC,OAAQ,EACRC,MAAM,EACNC,MAAO,EACPC,YAAa,QACbC,aAhBwBZ,EAAmBa,KAAKC,MAAMd,GAAoB,CAC1Ee,SAAU,CAAC/B,EAAoBA,GAC/BgC,OAAQ,CAAChC,EAAoBA,GAC7BiC,UAAW,CAACjC,EAAwBA,KA2GvBkC,EA3FD,WAAmC,IAAlC9B,EAAiC,uDAAzBH,EAAcI,EAAW,uCAC9C,OAAQA,EAAOC,MACb,KAAKxB,EACH,IAAQqC,EAAad,EAAOE,QAApBY,SACR,OAAO,2BACFf,GADL,IAEEe,SAAUA,IAGd,KAAKpC,EACH,IAAQqC,EAAaf,EAAOE,QAApBa,SACR,OAAO,2BACFhB,GADL,IAEEgB,SAAUA,EACVe,eAAgBf,GAAUhB,EAAMgB,WAGpC,KAAKnC,EACH,IAAQkD,EAAmB9B,EAAOE,QAA1B4B,eACR,OAAO,2BACF/B,GADL,IAEE+B,mBAGJ,KAAKnD,EACH,IAAQqC,EAAchB,EAAOE,QAArBc,UACR,OAAO,2BACFjB,GADL,IAEEiB,UAAWA,IAGf,KAAKnC,EACH,IAAMoC,EAASjB,EAAOE,QAAhBe,KAKN,OAJAA,EAAOc,KAAKC,IAAIf,EAAM,GAClBlB,EAAMmB,WACRD,EAAOc,KAAKE,IAAIhB,EAAMlB,EAAMmB,WAEvB,2BACFnB,GADL,IAEEkB,KAAMA,IAGV,KAAKnC,EACH,IAAQoC,EAAalB,EAAOE,QAApBgB,SACR,OAAO,2BACFnB,GADL,IAEEmB,SAAUA,IAGd,KAAKnC,EACH,IAAQoC,EAAWnB,EAAOE,QAAlBiB,OACFe,EAAgBH,KAAKE,IAAI,EAAGF,KAAKC,IAAIb,EAAQ,IACnD,OAAO,2BACFpB,GADL,IAEEoB,OAAQe,IAGZ,KAAKlD,EACH,IAAQoC,EAASpB,EAAOE,QAAhBkB,KACR,OAAO,2BACFrB,GADL,IAEEqB,SAGJ,KAAKlC,EACH,IAAQoC,EAAgBtB,EAAOE,QAAvBoB,YACR,OAAO,2BACFvB,GADL,IAEEuB,YAAaA,IAGjB,KAAKnC,EACH,IAAQoC,EAAiBvB,EAAOE,QAAxBqB,aAER,OADAX,aAAauB,QAAQ,eAAgBX,KAAKY,UAAL,2BAAoBrC,EAAMwB,cAAiBA,KACzE,2BACFxB,GADL,IAEEwB,aAAa,2BAAMxB,EAAMwB,cAAiBA,KAG9C,KAAKtC,EACH,IAAQoC,EAAUrB,EAAOE,QAAjBmB,MACR,OAAO,2BACFtB,GADL,IAEEsB,UAGJ,QACE,OAAOtB,IC5GPsC,EAAiBzB,aAAaC,QAAQ,cAKtCjB,EAAe,CACnB0C,WALsBD,EAAiBb,KAAKC,MAAMY,GAAkB,CACpEE,KAAM,GACNC,aAAc,IAIdC,WAAW,EACXC,WAAW,GAyBEC,EAtBE,WAAmC,IAAlC5C,EAAiC,uDAAzBH,EAAcI,EAAW,uCACjD,OAAQA,EAAOC,MACb,KAAKR,EACH,IAAQ6C,EAAetC,EAAOE,QAAtBoC,WAER,OADA1B,aAAa0B,WAAad,KAAKY,UAAUE,GAClC,2BACFvC,GADL,IAEEuC,eAGJ,KAAK5C,EACH,IAAQ+C,EAAczC,EAAOE,QAArBuC,UACR,OAAO,2BACF1C,GADL,IAEE0C,UAAWA,IAGf,QACE,OAAO1C,IC1BE6C,cAAgB,CAAEC,cAAaC,QAAOC,aCFtCC,eAAYC,G,4BCHrBC,G,WA0BJ,WAAYC,EAAO/C,GAAQ,oBACzB,IAAIgD,EAAaD,EAAM/C,GAAOiD,MAAM,UAIpC,IAHAC,KAAKC,KAAOL,EAAUM,cAAcJ,EAAW,IAC/CE,KAAKG,GAAKP,EAAUM,cAAcJ,EAAW,IAC7CE,KAAKI,QAAU,GACRP,EAAMhD,OAAUC,EAAQ,EAAIkD,KAAKI,QAAQvD,QAA8D,IAAlDgD,EAAM/C,EAAQ,EAAIkD,KAAKI,QAAQvD,QAAQA,QAAa,CAC9G,IAAMwD,EAAeR,EAAM/C,EAAQ,EAAIkD,KAAKI,QAAQvD,QACpDmD,KAAKI,QAAQE,KAAKV,EAAUW,YAAYF,K,sDAhC5C,SAAqBG,GACnB,IACIC,EADA9C,EAAO,EAWX,OANA8C,GADAD,GADAA,GADAA,EAAMA,EAAIE,QAAQ,IAAK,MACbA,QAAQ,IAAK,MACbA,QAAQ,IAAK,KACZX,MAAM,KACjBpC,GAA0B,GAAlBgD,OAAOF,EAAK,IAAW,GAAK,IACpC9C,GAA0B,GAAlBgD,OAAOF,EAAK,IAAW,IAC/B9C,GAA0B,IAAlBgD,OAAOF,EAAK,IACpB9C,GAAQgD,OAAOF,EAAK,M,yBAStB,SAAmBL,GAIjB,OADAA,GADAA,EAAUA,EAAQM,QAAQ,gBAAiB,wBACzBA,QAAQ,UAAW,e,KAkE1BE,G,sIA/Cb,WAAsBC,GAAtB,2FACMC,EAAa,GACbvE,EAAU,GAFhB,SAIyBwE,MAAMF,GAJ/B,cAIQG,EAJR,gBAKqBA,EAASC,OAL9B,OASE,IAJMC,EALR,OAQEJ,EADWI,EACOnB,MAAM,MACf7C,EAAI,EAAGA,EAAI4D,EAAWjE,OAAQK,IACrC4D,EAAW5D,GAAK4D,EAAW5D,GAAGwD,QAAQ,KAAK,IAC3CI,EAAW5D,GAAK4D,EAAW5D,GAAGwD,QAAQ,KAAK,IAGzCxD,EAAI,EACJiE,EAAc,EAfpB,aAgBSjE,EAAI4D,EAAWjE,QAhBxB,oBAiBUiE,EAAW5D,GAAGkE,SAAS,YAjBjC,wBAmBQlE,IAnBR,gCAuBMX,EAAQ4E,GAAe,IAAIvB,GAAUkB,EAAY5D,GACjDA,GAAKX,EAAQ4E,GAAaf,QAAQvD,OAAS,EAC3CsE,IAzBN,iDA4BS5E,GA5BT,4C,iFA+BA,SAAoBA,EAASoB,GAG3B,GAFAA,GAAQ,IAEJpB,EACF,IAAK,IAAIW,EAAI,EAAGA,EAAIX,EAAQM,OAAQK,IAAK,CACvC,IAAID,EAASV,EAAQW,GACrB,GAAIS,GAAQV,EAAOgD,MAAQtC,GAAQV,EAAOkD,GACxC,OAAOlD,EAAOmD,QAKpB,MAAO,O,KCrFLiB,GAAiB,CACnBC,KAAM,OACNC,IAAK,OAGHC,GAAY,CACdC,SAAU,WACVC,OAAQ,SACRC,UAAW,aAGfN,GAAeO,WAAa,SAAUC,GAClC,OAAQA,GACJ,KAAKR,GAAeC,KAChB,OAAOD,GAAeC,KAC1B,KAAKD,GAAeE,IAEpB,QACI,OAAOF,GAAeE,MAIlCF,GAAeS,SAAW,SAAUD,GAChC,OAAQA,GACJ,KAAKR,GAAeC,KAChB,OAAOD,GAAeC,KAC1B,KAAKD,GAAeE,IAEpB,QACI,OAAOF,GAAeE,MAMlCC,GAAUI,WAAa,SAAUC,GAC7B,OAAQA,EAAME,eACV,KAAKP,GAAUC,SACX,OAAOD,GAAUC,SACrB,KAAKD,GAAUE,OACX,OAAOF,GAAUE,OACrB,KAAKF,GAAUG,UACX,OAAOH,GAAUG,UACrB,QACI,OAAOH,GAAUC,WAI7BD,GAAUM,SAAW,SAAUD,GAC3B,OAAQA,EAAME,eACV,KAAKP,GAAUC,SACX,OAAOD,GAAUC,SACrB,KAAKD,GAAUE,OACX,OAAOF,GAAUE,OACrB,KAAKF,GAAUG,UACX,OAAOH,GAAUG,UACrB,QACI,OAAOH,GAAUC,WAU7B,IAAIO,GAAK,EACLC,GAAmB,SAAUhC,EAAME,EAAI+B,EAAWvF,GAClDsD,EAAOA,GAAQ,eACfE,EAAKA,GAAM,eACX+B,EAAYA,GAAab,GAAeE,IACxC5E,EAAOA,GAAQ6E,GAAUE,OAEzB1B,KAAKmC,KAAOlC,EACZD,KAAKoC,GAAKjC,EACVH,KAAKqC,KAAO1F,EACZqD,KAAKsC,UAAYJ,EACjBlC,KAAKgC,GAAKA,MAEdC,GAAiBL,WAAa,SAAUxB,GACpC,IAAImC,EAAI,IAAIN,GAAiB,eAAgB,eAAgBZ,GAAeE,IAAKC,GAAUC,UAE3F,OADAc,EAAEC,WAAWpC,GACNmC,GAEXN,GAAiBQ,UAAUC,SAAW,WAClC,IAAIlC,EAAM,GAEV,OADAA,GAAOR,KAAKmC,KAAO,KAAOnC,KAAKoC,GAAK,KAAOpC,KAAKqC,KAAO,KAAOrC,KAAKsC,UAAY,MAGnFL,GAAiBQ,UAAUD,WAAa,SAAU3C,GAC9C,IAAK,IAAI3C,EAAI,EAAGA,EAAIuB,KAAKE,IAAIkB,EAAMhD,OAAQ,GAAIK,IACjC,IAANA,EACA8C,KAAKmC,KAAOtC,EAAM3C,GACP,IAANA,EACL8C,KAAKoC,GAAKvC,EAAM3C,GACL,IAANA,EACL8C,KAAKqC,KAAOb,GAAUI,WAAW/B,EAAM3C,IAE5B,IAANA,IACL8C,KAAKsC,UAAYjB,GAAeO,WAAW/B,EAAM3C,MAK7D+E,GAAiBU,YAAc,SAAU1F,EAAQU,GAC7C,IAAIiF,EAAY3F,EAAOkF,KAAKpC,MAAM,KAC9B8C,EAAU5F,EAAOmF,GAAGrC,MAAM,KAE1B+C,EAAkC,GAAvBnC,OAAOiC,EAAU,IAAW,GAA4B,GAAvBjC,OAAOiC,EAAU,IAAWjC,OAAOiC,EAAU,IACzFG,EAA8B,GAArBpC,OAAOkC,EAAQ,IAAW,GAA0B,GAArBlC,OAAOkC,EAAQ,IAAWlC,OAAOkC,EAAQ,IAErF,QAAIC,GAAYC,KAGZpF,GAAQmF,GAAYnF,GAAQoF,IAKpCd,GAAiBQ,UAAUO,YAAc,SAAUrF,GAC/C,IAAIiF,EAAY5C,KAAKmC,KAAKpC,MAAM,KAC5B8C,EAAU7C,KAAKoC,GAAGrC,MAAM,KAExB+C,EAAkC,GAAvBnC,OAAOiC,EAAU,IAAW,GAA4B,GAAvBjC,OAAOiC,EAAU,IAAWjC,OAAOiC,EAAU,IACzFG,EAA8B,GAArBpC,OAAOkC,EAAQ,IAAW,GAA0B,GAArBlC,OAAOkC,EAAQ,IAAWlC,OAAOkC,EAAQ,IAErF,QAAIC,GAAYC,KAGZpF,GAAQmF,GAAYnF,GAAQoF,IAKpCd,GAAiBQ,UAAUQ,YAAc,SAAUtF,GAC/C,IAAIuF,EAAOzE,KAAK0E,MAAMxF,EAAI,MACtBgB,EAAMF,KAAK0E,MAAOxF,EAAQ,GAAO,IACjCyF,GAAQzF,EAAQ,IAAI0F,QAAQ,GAEhCrD,KAAKmC,KAAL,UAAee,EAAf,YAAuBvE,EAAvB,YAA8ByE,GAC9BpD,KAAKgC,GAAKA,MAGdC,GAAiBQ,UAAUa,UAAY,SAAU3F,GAC7C,IAAIuF,EAAOzE,KAAK0E,MAAMxF,EAAI,MACtBgB,EAAMF,KAAK0E,MAAOxF,EAAQ,GAAO,IACjCyF,GAAQzF,EAAQ,IAAI0F,QAAQ,GAEhCrD,KAAKoC,GAAL,UAAac,EAAb,YAAqBvE,EAArB,YAA4ByE,GAC5BpD,KAAKgC,GAAKA,MAGdC,GAAiBQ,UAAUc,QAAU,WACjC,IAAIV,EAAU7C,KAAKoC,GAAGrC,MAAM,KAE5B,OADkC,GAArBY,OAAOkC,EAAQ,IAAW,GAA0B,GAArBlC,OAAOkC,EAAQ,IAAWlC,OAAOkC,EAAQ,K,IAOnFW,G,sIAEF,WAAsB3C,GAAtB,0FAC2BE,MAAMF,GADjC,cACUG,EADV,gBAEuBA,EAASC,OAFhC,cAEUC,EAFV,yBAGWsC,EAAgB5B,WAAWV,IAHtC,2C,8DAFEsC,GAQK5B,WAAa,SAAUxB,GAI1B,IAHA,IAAM7D,EAAU,GAEZsD,GADJO,EAAUA,EAAQqD,WAAW,KAAK,KACd1D,MAAM,MACjB7C,EAAI,EAAGA,EAAI2C,EAAMhD,OAAQK,GAAK,EAAG,CACtC,IAAIwG,EAAQ7D,EAAM8D,MAAMzG,EAAGA,EAAI,GAC/B,GAAIwG,EAAM7G,OAAS,EAAG,MACtBN,EAAQ+D,KAAK2B,GAAiBL,WAAW8B,IAE7C,OAAOnH,GAjBTiH,GAoBK1B,SAAW,SAAUvF,GAExB,IADA,IAAIiE,EAAM,GACDtD,EAAI,EAAGA,EAAIX,EAAQM,OAAQK,IAAK,CAErCsD,GADajE,EAAQW,GACPwF,WAAa,KAE/B,OAAOlC,GA1BTgD,GA6BKI,iBAAmB,SAAUrH,EAASoB,GAGzC,IADA,IAAIkG,EAAM,GACD3G,EAAI,EAAGA,EAAIX,EAAQM,OAAQK,IAAK,CACrC,IAAID,EAASV,EAAQW,GACjB+E,GAAiBU,YAAY1F,EAAQU,IACrCkG,EAAIvD,KAAKrD,GAEjB,OAAO4G,GCnMR,IAAMC,GAAgB,SAACrH,GAC1B,OAAOA,EAAM8C,YAAYhD,SAGhBwH,GAAiB,SAACtH,GAC3B,OAAOA,EAAM+C,MAAMhC,UAGVwG,GAAiB,SAACvH,GAC3B,OAAOA,EAAM+C,MAAM/B,UAGVwG,GAAkB,SAACxH,GAC5B,OAAOA,EAAM+C,MAAM9B,WAGVwG,GAAa,SAACzH,GACvB,OAAOA,EAAM+C,MAAM7B,MAGVwG,GAAiB,SAAC1H,GAC3B,OAAOA,EAAM+C,MAAM5B,UAGVwG,GAAqB,SAAC3H,GAC/B,OAAOA,EAAM+C,MAAMvB,cAGVoG,GAAe,SAAC5H,GACzB,OAAOA,EAAM+C,MAAM3B,QAGVyG,GAAa,SAAC7H,GACvB,OAAOA,EAAM+C,MAAM1B,MAGVyG,GAAc,SAAC9H,GACxB,OAAOA,EAAM+C,MAAMzB,OAGVyG,GAAoB,SAAC/H,GAC9B,OAAOA,EAAM+C,MAAMxB,aAGVyG,GAAkB,SAAChI,GAC5B,OAAOA,EAAMgD,SAASN,WAGbuF,GAAuB,SAACjI,GACjC,OAAOA,EAAM+C,MAAMhB,gBAIVmG,GAAgB,SAAClI,GAC1B,OAAOA,EAAMgD,SAAST,YAIb4F,GAAoB,SAACjH,GAC9B,IAAMH,EAAWuG,GAAec,GAAMC,YACtC,OAAOlE,GAASmE,aAAavH,EAAUG,IC3C9BqH,GAAc,SAAAxH,GAAQ,MAAK,CACtCb,KAAMxB,EACNyB,QAAS,CACPY,cAISyH,GAAc,SAAAxH,GAAQ,MAAK,CACtCd,KAAMvB,EACNwB,QAAS,CAAEa,cAGAyH,GAAe,SAAAxH,GAAS,MAAK,CACxCf,KAAMtB,EACNuB,QAAS,CAAEc,eAGAyH,GAAU,SAACxH,GACtB,MAAO,CACLhB,KAAMpB,EACNqB,QAAS,CAAEe,UAGFyH,GAAc,SAACxH,GAC1B,MAAO,CACLjB,KAAMnB,EACNoB,QAAS,CAAEgB,cAGFyH,GAAY,SAACxH,GACxB,MAAO,CACLlB,KAAMlB,EACNmB,QAAS,CAAEiB,YAeFyH,GAAiB,SAACtH,GAC7B,MAAO,CACLrB,KAAMf,EACNgB,QAAS,CAAEoB,iBAyBFuH,GAAiB,SAAAhJ,GAAO,MAAK,CACxCI,KAAMb,EACNc,QAAS,CAAEL,aAGAiJ,GAAiB,SAAAjJ,GAAO,MAAK,CACxCI,KAAMZ,EACNa,QAAS,CAAEL,a,wBCtGEkJ,I,GAAAA,GCGA,YAA4C,IAA1B5D,EAAyB,EAAzBA,MAAO6D,EAAkB,EAAlBA,SAAU5H,EAAQ,EAARA,KACxC6H,EAAMC,iBAAO,MACnB,OACI,iCACI,uBAAMC,UAAU,cAAhB,SAAgCpH,KAAK0E,MAAMtB,KAC3C,sBAAK8D,IAAKA,EAAKE,UAAU,mBAAmBC,QACxC,SAACC,GACGA,EAAEC,kBACF,IAAIC,EAAON,EAAIO,QAAQC,wBACnBC,EAAIL,EAAEM,QAAUJ,EAAKK,IACzBZ,GAAUO,EAAKM,OAASH,GAAKH,EAAKM,SAL1C,SAQI,sBAAKV,UAAU,eACXW,MAAO,CACHC,SAAU,WACVC,MAAO,OACPH,OAAO,GAAD,OAAK9H,KAAK0E,MAAMtB,GAAhB,KACN8E,WAAY,wBACZC,OAAQ,WAGnB9I,EAAO,eAAC,KAAD,CAAc0I,MAAO,CAACK,MAAM,QAASC,UAAU,SAAW,eAAC,KAAD,CAAYN,MAAO,CAACK,MAAM,QAASC,UAAU,aCJvHC,GAAgB,CAChBL,MAAO,MACPM,OAAQ,GACRC,QAAS,EACTC,WAAY,aACZT,SAAU,WACVU,KAAM,MACNZ,OAAQ,QAGRa,GAAe,CACfC,OAAQ,SACRX,MAAO,OACPH,OAAQ,MACRI,WAAY,OACZF,SAAU,WACVG,OAAQ,QAGRU,GAAuB,CACvBZ,MAAO,OACPH,OAAQ,MACRI,WAAY,SAGZY,GAAkB,CAClBJ,KAAM,OACNb,IAAK,QACLkB,WAAY,QACZd,MAAO,OACPH,OAAQ,OACRI,WAAY,QACZF,SAAU,WACVgB,aAAc,MACdC,OAAQ,kBACRT,QAAS,GAGTU,GAAkB,CAClBjB,MAAO,OACPH,OAAQ,OACRO,UAAW,QAGTc,GACK,GADLA,GAEkB,IAFlBA,GAGI,GAHJA,GAIK,GAJLA,GAKC,GALDA,GAOkB,IAPlBA,GAQkB,IARlBA,GASkB,IAGpBC,GAAWC,IAkOf,IAYeC,gBAZS,SAAAtL,GACpB,MAAO,CACHkB,KAAMuG,GAAWzH,GACjBmB,SAAUuG,GAAe1H,GACzBuB,YAAawG,GAAkB/H,GAC/BoB,OAAQwG,GAAa5H,GACrBuL,OAAQ1D,GAAW7H,GACnB0C,UAAWsF,GAAgBhI,GAC3BiB,UAAWuG,GAAgBxH,OAIb,IAAoB0I,WAASG,mBAA7B,gCAA6CA,IAA7C,2BAA6DD,IAA7D,IAAP0C,EA5Of,YAYI,IAMIvB,EAlBiB7I,EAYtB,EAZsBA,KACrBwH,EAWD,EAXCA,QACAvH,EAUD,EAVCA,SACAqK,EASD,EATCA,QACAjK,EAQD,EARCA,YACAsH,EAOD,EAPCA,eACAD,EAMD,EANCA,UACAxH,EAKD,EALCA,OACAmK,EAID,EAJCA,OACAE,EAGD,EAHCA,aACAxK,EAED,EAFCA,UACAyB,EACD,EADCA,UAGMwG,EAAMC,iBAAO,MACbuC,EAAavC,iBAAO,MACpBwC,EAAUxC,iBAAO,MACjByC,EAAYzC,iBAAO,MAGrBY,EADAyB,EACK,2BAAQlB,IAAR,IAAuBE,QAAS,IAEhC,2BAAQF,IAAR,IAAuBE,QAAS,IAEzC,MAAsCqB,mBAASf,IAA/C,mBAAOgB,EAAP,KAAoBC,EAApB,KACA,EAAsCF,mBAASX,IAA/C,mBAAOc,EAAP,KAAoBC,EAApB,KACA,EAAwBJ,mBAAShB,IAA1BqB,EAAP,oBACA,EAAgCL,mBAAS,GAAzC,mBAAOM,EAAP,KAAiBC,EAAjB,KACA,EAAgCP,mBAAS,MAAzC,mBAAOQ,EAAP,KAAiBC,EAAjB,KAEMC,EAAe,SAACrL,GAClB,IAAIsL,EAAIxK,KAAK0E,MAAMxF,EAAI,KAAe,IAClCuL,EAAIzK,KAAK0E,MAAMxF,EAAQ,GAAM,IAC7BwL,EAAI1K,KAAK0E,MAAMxF,EAAO,IAI1B,OAHIsL,EAAI,KAAIA,EAAI,IAAMA,GAClBC,EAAI,KAAIA,EAAI,IAAMA,GAClBC,EAAI,KAAIA,EAAI,IAAMA,GACfF,EAAI,IAAMC,EAAI,IAAMC,GAG/BC,qBAAU,WACFxL,EAAW,GACXiL,EAAYpK,KAAK0E,MAAMxF,EAAOC,EAAW,KAAO,KAEpDyK,EAAUnC,QAAQmD,UAAYL,EAAarL,GAAQ,MAAQqL,EAAapL,KACzE,CAACD,EAAMC,IAEVwL,qBAAU,WACN,IAAGjK,GAAc2J,EAAjB,CACA,IAAIQ,EAAOR,EAASS,SAAW,EAAI,EAI/B,OAHIT,EAASU,UAASF,GAAM,GACxBR,EAASW,SAAQH,GAAM,GAEnBR,EAASY,SACb,KAAK9B,GACL,KAAKA,GACL,KAAKA,GACD+B,IACA,MACJ,KAAK/B,GACL,KAAKA,GACDzC,EAAQxH,EAAO2L,GACf,MACJ,KAAK1B,GACL,KAAKA,GACDzC,EAAQxH,EAAO2L,GACf,MACJ,KAAK1B,GACDM,QAGb,CAACY,IAEJM,qBAAU,WAEN,IAAMQ,EAAgB,SAAC7D,GACnBgD,EAAYhD,IAGhB,OADA8D,OAAOC,iBAAiB,UAAWF,GAC5B,WACHC,OAAOE,oBAAoB,UAAWH,MAE3C,IAEH,IAAMI,EAAY,SAACjE,GACfkE,EAAWlE,EAAEmE,UAGXC,EAAU,SAAC3J,GACD,WAARA,EACAgI,EAAe,2BAAKD,GAAN,IAAmB6B,OAAQ,aAC5B,WAAR5J,GACLkI,EAAe,2BAAKD,GAAN,IAAmB2B,OAAQ,cAG3CC,EAAW,SAAC7J,GACF,WAARA,EACAgI,EAAe,2BAAKD,GAAN,IAAmB6B,OAAQ,WAC5B,WAAR5J,GACLkI,EAAe,2BAAKD,GAAN,IAAmB2B,OAAQ,YAG3CH,EAAa,SAACK,GAChB,IAAIrE,EAAOmC,EAAQlC,QAAQC,wBACvByC,GAAY0B,EAAIrE,EAAKkB,MAAQlB,EAAKS,MAClCkC,GAAY,IAAKA,EAAW,GAC5BA,EAAW,IAAKA,EAAW,GAC/BzD,EAAQyD,EAAWhL,IAQjB2M,EAAiB,WACnBC,SAASC,cAAgB,KACzBD,SAASE,YAAc,MAG3BtB,qBAAU,WAEFvB,GADgB,SAAhB7J,EACY2M,IAGA7C,MAElB,CAAC9J,IAEH,IAAM2L,EAAc,SAACiB,GACblN,GAEI4H,EADgB,SAAhBtH,EACe,QAGA,SAKrB6M,EACF,uBAAKhF,UAAU,gBAAf,UAEI,eAAC,IAAD,CAAYA,UAAU,gBAAgBC,QAAS,SAAC8E,GAASzF,EAAQxH,EAAK,IAAKiN,EAAM5E,qBACjF,eAAC,IAAD,CAAWH,UAAU,gBAAgBC,QAAS,SAAC8E,GAAYzF,EAAQxH,EAAO,GAAIiN,EAAM5E,qBACpF,eAAC6B,GAAD,CACI7F,GAAG,WAKH8I,IAAI,QACJtE,MAAK,2BAAMiC,GAAN,IAAmB5B,MAAM,UAC9Bf,QAAS6D,EACToB,eAAgB,SAAChF,GACboE,EAAQ,UACRpE,EAAEC,mBAENgF,eAAgB,SAACjF,GACbsE,EAAS,UACTtE,EAAEC,qBAGV,eAAC,IAAD,CAAYH,UAAU,iBAAiBC,QAAS,SAAC8E,GAAYzF,EAAQxH,EAAO,GAAIiN,EAAM5E,qBACtF,eAAC,IAAD,CAAaH,UAAU,iBAAiBC,QAAS,SAAC8E,GAASzF,EAAQxH,EAAK,IAAMiN,EAAM5E,wBAI5F,OACI,uBAAKQ,MAAOA,EAAOb,IAAKA,EAAxB,UACI,sBAAKa,MAAOY,GAAczB,IAAKyC,EAAS6C,cA5D9B,SAAClF,GACfkE,EAAWlE,EAAEmE,SACbnE,EAAEC,mBA0DoEkF,YAAaX,EAAgBzE,QAAS,SAAAC,GAAC,OAAEA,EAAEC,mBAA7G,SACI,sBAAKQ,MAAK,2BAAOmC,GAAP,IAAsBjC,MAAmB,IAAXkC,EAAkB,MAA1D,SACI,sBAAKpC,MAAO+B,EACR5C,IAAKwC,EACL4C,eAAgB,WAAQZ,EAAQ,WAChCa,eAAgB,WAAQX,EAAS,WACjCY,cAAe,SAAClF,GACZyE,SAASC,cAAgBT,EACzBQ,SAASE,YAAcH,EACvBC,SAASW,QAAU,SAAApF,GAAC,OAAIA,EAAEC,mBAC1BD,EAAEC,mBAENF,QAAS,SAACC,GACNA,EAAEC,yBAKlB,oBAAGL,IAAK0C,EAAWxC,UAAU,gBAC5BgF,EACD,eAAC,IAAD,CACI7I,GAAG,cACH8I,IAAI,QACJtE,MAAK,2BACEiC,GADF,IAED7B,OAAQ,OACRH,SAAU,WACV2E,MAAO,IACPvE,MAAM,QACNwE,WAAY,cACZC,YAAa,OACbC,OAAQ,UAEZzF,QAAS,SAACC,GACNmC,IACAnC,EAAEC,mBAEN+E,eAAgB,WAAQZ,EAAQ,WAChCa,eAAgB,WAAQX,EAAS,aAEjC,sBAAKxE,UAAU,kBAAf,SACA,eAAC,GAAD,CACIhE,MAAgB,IAAThE,EACPC,KAAMkK,EACNtC,SACI,SAACnD,GACG8C,EAAU9C,cChShCiJ,GAAc,CAChBC,cAAe,OACfhF,SAAU,WACVU,KAAM,EACNb,IAAK,EACLI,MAAO,OACPH,OAAQ,OACRS,OAAQ,GA2FZ,IAOee,gBAPS,SAAAtL,GAIpB,MAAO,CAAEF,QAHOuH,GAAcrH,GAGZkB,KAFLuG,GAAWzH,GAEAwB,aADHmG,GAAmB3H,MAIJ,CAAEiP,QJzDnB,SAAC5N,GACtB,MAAO,CACLnB,KAAMjB,EACNkB,QAAS,CAAEkB,UIsDoCqH,WAASwG,SJnDpC,SAAC5N,GACvB,MAAO,CACLpB,KAAMhB,EACNiB,QAAS,CAAEmB,YIgDAgK,EA/Ff,YAQI,IAPAxL,EAOD,EAPCA,QACAoB,EAMD,EANCA,KACA+N,EAKD,EALCA,QACAvG,EAID,EAJCA,QACAwG,EAGD,EAHCA,SACA1N,EAED,EAFCA,aACA2N,EACD,EADCA,YAEA,EAA0BtD,mBAASkD,IAAnC,mBAAOhF,EAAP,KAAcqF,EAAd,KA2EA,OAzEAzC,qBAAU,WACN,GAAIwC,EACAC,EAAS,2BAAKL,IAAN,IAAmB7E,WAAY,gBAG3C,GAAKpK,GAAYA,EAAQM,OAAzB,CAYA,IAVA,IAAIiP,EL+BoB,SAACnO,GAC7B,IAAMpB,EAAUuH,GAAce,GAAMC,YACpC,OAAOtB,GAAgBI,iBAAiBrH,EAASoB,GKjCxBoO,CAAiBpO,GAClCG,GAAO,EACPkO,GAAO,EACPC,GAAQ,EACRC,GAAO,EACPC,GAAY,EACZC,GAAc,EACdC,GAAc,EACdC,EAAa,KAERpP,EAAI,EAAGA,EAAI4O,EAAejP,OAAQK,IAAK,CAC5C,IAAID,EAAS6O,EAAe5O,GACxBe,EAAahB,EAAOoF,MAAM,KAAOhG,GAAsB4B,EAAahB,EAAOoF,MAAM,KAAOhG,IACxFyB,GAAO,GAEPG,EAAahB,EAAOoF,MAAM,KAAOhG,GAAsB4B,EAAahB,EAAOoF,MAAM,KAAOhG,IACxF2P,GAAO,EACPM,EAAarP,GAEbgB,EAAahB,EAAOoF,MAAM,KAAOhG,GAAuB4B,EAAahB,EAAOoF,MAAM,KAAOhG,IACzF4P,GAAQ,GAERhO,EAAahB,EAAOoF,MAAM,KAAOhG,GAAsB4B,EAAahB,EAAOoF,MAAM,KAAOhG,IACxF6P,GAAO,GAEPjO,EAAahB,EAAOoF,MAAM,KAAOhG,GAA4B4B,EAAahB,EAAOoF,MAAM,KAAOhG,IAC9F8P,GAAY,GAEZlO,EAAahB,EAAOoF,MAAM,KAAOhG,GAA8B4B,EAAahB,EAAOoF,MAAM,KAAOhG,IAChG+P,GAAc,GAEdnO,EAAahB,EAAOoF,MAAM,KAAOhG,GAAiC4B,EAAahB,EAAOoF,MAAM,KAAOhG,IACnG+P,GAAc,EACdC,GAAc,GAItBX,EAAQ5N,GAEJkO,EACA7G,EAAQmH,EAAW/I,UAAY,MAM3BsI,EAFJK,GAAQD,GAASE,GAAaC,EAC1BF,EACS,2BAAKV,IAAN,IAAmBe,eAAgB,eACtCJ,EACI,2BAAKX,IAAN,IAAmBe,eAAgB,eACtCH,EACI,2BAAKZ,IAAN,IAAmBe,eAAgB,eAElC,2BAAKf,IAAN,IAAmB7E,WAAY,UAGlC,eAAK6E,KAIdG,EADAU,EACS,EAEA,OAGd,CAAC1O,EAAMpB,EAAS0B,EAAc2N,IAE1B,sBAAKpF,MAAOA,O,SChGnBA,GAAQ,CACRK,MAAO,QACP2F,SAAU,OACVC,gBAAiB,mBAkBrB,IAQe1E,gBARS,SAAAtL,GAKpB,MAAO,CAAEe,SAJQuG,GAAetH,GAIbkB,KAHNuG,GAAWzH,GAGC+P,SAFR7H,GAAclI,GAAOwC,KAEHyN,iBADV/H,GAAclI,GAAOyC,gBAInC6I,EAvBf,YAAkE,EAA9CvK,SAA+C,IAArCG,EAAoC,EAApCA,KAAM6O,EAA8B,EAA9BA,SAAUE,EAAoB,EAApBA,iBAO1C,OALAlG,GAAK,2BACEA,IADF,IAEDiG,gBAAiB,cAAeC,EAAkB,IAClDF,SAAWA,EAAW,OAGtB,sBAAKhG,MAAOA,GAAZ,SACKmG,aAAO/H,GAAkBjH,GAAMiP,KAAK,YCZ3CC,GAAW,SAACC,EAAOC,EAAMC,GAC7B,IAAIC,EACJ,OAAO,WACL,IAAMC,EAAUlN,KACVmN,EAAOC,UACbC,aAAaJ,GACbH,IACAG,EAAaK,YAAW,kBAAMP,EAAKQ,MAAML,EAASC,KAAOH,KAIvDQ,G,kDACJ,WAAYC,GAAQ,IAAD,8BACjB,cAAMA,IA8ERvF,aAAe,WACTsC,SAASkD,kBACXlD,SAASmD,iBAET,EAAKC,OAAO1H,QAAQ2H,cAAcC,qBAnFnB,EAuFnBC,OAAS,WACP,MAAwH,EAAKN,MAArHhQ,EAAR,EAAQA,SAAU0H,EAAlB,EAAkBA,QAASC,EAA3B,EAA2BA,YAAa1H,EAAxC,EAAwCA,UAAW4H,EAAnD,EAAmDA,eAAgB0I,EAAnE,EAAmEA,kBAAmBhQ,EAAtF,EAAsFA,YAAaqH,EAAnG,EAAmGA,UAAWxH,EAA9G,EAA8GA,OAC9G,EAA+C,EAAKpB,MAA7CkB,EAAP,EAAOA,KAAMC,EAAb,EAAaA,SAAUqK,EAAvB,EAAuBA,QAAS2D,EAAhC,EAAgCA,YAChC,OACE,uBAAK/F,UAAS,0BAAqBoC,EAAU,GAAK,UAChDgG,cAAepB,IACb,WACE,EAAKqB,SAAS,CAACjG,SAAS,OAE1B,WACM,EAAK2F,OAAO1H,UACdmH,aAAa,EAAKc,WAClB,EAAKA,UAAYb,YAAW,WAC1B,EAAKY,SAAS,CAACjG,QAAS,EAAK2F,OAAO1H,QAAQkI,SAC5C,EAAKD,UAAY,OAChB,QAGP,KAEFrI,QAAS,WACP,EAAKuI,aACmB,IAApB,EAAKA,WACP,EAAKC,MAAQhB,YAAW,WACtB,EAAKe,WAAa,EAClB,EAAKC,MAAQ,KACT5Q,GAEA4H,EADiB,QAAftH,EACa,QAEA,UAGlB,MAEHqP,aAAa,EAAKiB,OAClB,EAAKD,WAAa,EAClB,EAAKC,MAAQ,KACb,EAAKpG,iBAGTqG,QAAS,SAAC3D,GACRA,EAAM5E,kBACNX,EAAUxH,GAAyB,KAAhB+M,EAAM4D,SAE3BvD,cAAe,SAAClF,GACC,GAAZA,EAAE0I,QACH,EAAKP,SAAS,CAAEtC,aAAcA,IAAe,WAC3CtG,EAAe,aA5CvB,UAiDE,wBACEO,UAAS,iBAAYpI,EAAW,GAAK,aACrCiR,IAAKjR,EACLkI,IAAK,EAAKiI,OACVe,aAAc,SAAC/D,GACboD,GAAkB,GAClB,IAAMY,EAAiBtR,aAAaC,QAAQG,IAAc,EAC1DyH,EAAQxE,OAAOiO,IACfxJ,EAAYwF,EAAMiE,OAAOjR,UACzB0H,EAAe,UAEjBwJ,UAAW,SAAClE,GACV,IAAQmE,EAAgB,EAAKnB,OAAO1H,QAA5B6I,YACR5J,EAAQ4J,IAEVC,SAAU,SAACpE,GACT,IAAQmE,EAAgB,EAAKnB,OAAO1H,QAA5B6I,YACR5J,EAAQ4J,IAEVE,aAAc,SAACrE,GACbzF,EAAQyF,EAAMiE,OAAOE,gBAGzB,eAAC,GAAD,CAAanD,YAAaA,IAC1B,uBACEpF,MAAO,CACL0I,QAAS,OACTzI,SAAU,WACV0I,iBAAkB,cAClB7I,IAAK,KACLa,KAAM,EACNT,MAAO,OACPH,OAAQ,OACRS,OAAQ,GATZ,UAYE,sBAAKnB,UAAU,oBAAf,SACG,eAAC,GAAD,CAAUlI,KAAa,IAAPA,MAEnB,sBAAKkI,UAAU,oBAAf,SACE,eAAC,GAAD,CACEF,IAAK,EAAKyJ,QACV5I,MAAO,CAAEE,MAAO,OAChB2I,WAAY,EAAKA,WACjBN,YAAapR,EACbC,SAAUA,EACVqK,QAASA,EACTC,aAAc,EAAKA,aACnBzL,MAAOuB,aA1LjB,EAAKvB,MAAQ,CACXkB,KAAM,EACNC,SAAU,EACVqK,SAAS,EACT2D,aAAa,GAEf,EAAKgC,OAAS0B,sBACd,EAAKF,QAAUE,sBACf,EAAKnB,UAAY,KACjB,EAAKoB,0BAA4B,EACjC,EAAKlB,WAAa,EAClB,EAAKC,MAAQ,KAbI,E,qDAgBnB,WAAoB,IAAD,OACjBtO,KAAKwP,aAAeC,aAAY,WAC9B,MAAqC,EAAKhC,MAAnC9P,EAAP,EAAOA,KAAMD,EAAb,EAAaA,UAAW0B,EAAxB,EAAwBA,UACpB1B,GAAaC,IAASyB,GACxB9B,aAAauB,QAAQnB,EAAWC,KACjC,O,kCAGL,WACKqC,KAAKsO,QACNjB,aAAarN,KAAKsO,OAClBtO,KAAKsO,MAAQ,MAEZtO,KAAKwP,eACNE,cAAc1P,KAAKwP,cACnBxP,KAAKwP,aAAe,Q,gCAIxB,SAAmBG,EAAWC,GAAY,IAAD,OACvC,EAAmD5P,KAAKyN,MAAhD9P,EAAR,EAAQA,KAAMK,EAAd,EAAcA,YAAaH,EAA3B,EAA2BA,OAAQC,EAAnC,EAAmCA,KAAMC,EAAzC,EAAyCA,MAErCiC,KAAKyN,MAAMhQ,WAAakS,EAAUlS,UACpCuC,KAAKkO,SAAS,CACZvQ,OACAsK,SAAS,EACT2D,aAAa,IAGbnN,KAAKoR,IAAIlS,EAAOqC,KAAK4N,OAAO1H,QAAQ6I,aAAe,KACrD/O,KAAK4N,OAAO1H,QAAQ6I,YAAcpR,IAEhCG,GAAQW,KAAKoR,IAAIhS,EAASmC,KAAK4N,OAAO1H,QAAQrI,QAAU,OAExDmC,KAAK4N,OAAO1H,QAAQrI,OADlBC,EAC2B,EAGAD,GAGZ,SAAhBG,GAA2BgC,KAAK4N,OAAO1H,QAAQkI,QAClDpO,KAAK4N,OAAO1H,QAAQ4J,OACpB9P,KAAKkO,SAAS,CAACtC,aAAa,IAC5ByB,aAAarN,KAAKmO,WAClBnO,KAAKmO,UAAYb,YAAW,WAC1B,EAAKY,SAAS,CAAEjG,SAAS,IACzB,EAAKkG,UAAY,OAChB,MAEqB,UAAhBnQ,GAA6BgC,KAAK4N,OAAO1H,QAAQkI,SACzDpO,KAAK4N,OAAO1H,QAAQ6J,QACjB/P,KAAKmO,YAENd,aAAarN,KAAKmO,WAClBnO,KAAKmO,UAAY,MAEnBnO,KAAKkO,SAAS,CAAEjG,SAAS,KAExBjI,KAAK4N,OAAO1H,QAAQ8J,cAAgBjS,IACrCiC,KAAK4N,OAAO1H,QAAQ8J,aAAejS,O,GA5EfkS,IAAMC,eAmNjBnI,gBAbS,SAAAtL,GACtB,MAAO,CACLgB,SAAUuG,GAAevH,GACzBkB,KAAMuG,GAAWzH,GACjBoB,OAAQwG,GAAa5H,GACrBqB,KAAMwG,GAAW7H,GACjBuB,YAAawG,GAAkB/H,GAC/BsB,MAAOwG,GAAY9H,GACnBiB,UAAWuG,GAAgBxH,GAC3B2C,UAAWsF,GAAqBjI,MAII,CAAE2I,eAAaD,WAASG,kBAAgBD,aAAW2I,kBN9I1D,SAACxP,GAChC,MAAO,CACL7B,KAAMrB,EACNsB,QAAS,CAAE4B,qBM2IAuJ,CAAiGyF,I,MCtOjG2C,OCEA,YAAyB,IAATC,EAAQ,EAARA,MAC3B,OACI,sBAAKvK,UAAU,UAAf,SACI,uBAAKA,UAAU,MAAf,UACI,+DACA,0DACA,uDACA,6BACA,oBAAGA,UAAU,YAAYwK,KAAK,+CAA9B,8DAEA,6DACA,wBACA,oBAAGxK,UAAU,OAAb,oCACA,uBAAKA,UAAU,OAAf,6BACoB,wBADpB,wBAIA,uBAAKA,UAAU,OAAf,2BACkB,wBADlB,iBAIA,uBAAKA,UAAU,OAAf,4BACmB,wBADnB,uBAIA,sBAAKA,UAAU,OAAf,yCAIA,wBACA,oBAAGA,UAAU,OAAb,mCACA,uBAAKA,UAAU,cAAf,qCAC4B,wBAD5B,oBAIA,oBAAGA,UAAU,OAAb,8BACA,uBAAKA,UAAU,OAAf,qCAC4B,wBAD5B,yCAE0C,wBAF1C,+BAGgC,2BAEhC,wBACA,wBACA,wBACA,yBAAQA,UAAU,SAASC,QAASsK,EAApC,sB,MCkBhB,IChEe/Q,GDqEA0I,aALS,SAAAtL,GAEpB,MAAO,CAAEuC,WADU2F,GAAclI,MAIG,CAAE6T,uBTmDJ,SAACtR,GAAD,MAAiB,CACrDrC,KAAMR,EACNS,QAAS,CAAEoC,iBSrDE+I,EA/Df,YAAkE,IAA9CqI,EAA6C,EAA7CA,MAAOpR,EAAsC,EAAtCA,WAAYsR,EAA0B,EAA1BA,uBAqB7BC,EAAiB,SAAC1O,GACpB,IAAM2O,EAAe,eAAOxR,GAC5BwR,EAAgBtR,aAAeT,KAAKgS,MAAM,IAAMD,EAAgBtR,aAAe2C,IAAU,GACtF2O,EAAgBtR,aAAe,GAAOsR,EAAgBtR,aAAe,GAGxEoR,EAAuBE,IAE3B,OACI,sBAAK3K,UAAU,qBAAf,SACI,uBAAKA,UAAU,yBAAf,UACI,uBAAKA,UAAU,4BAAf,UACI,8CACA,kCACI,yBAAQC,QAxBR,WACZ9G,EAAWC,KAAO,IAClBqR,EAAuB,2BAEZtR,GAFW,IAGdC,KAAMD,EAAWC,KAAO,OAmBpB,eACA,gCAAO,IAAMD,EAAWC,KAAO,MAC/B,yBAAQ6G,QApCR,WACZ9G,EAAWC,KAAO,IAClBqR,EAAuB,2BAEZtR,GAFW,IAGdC,KAAMD,EAAWC,KAAO,OA+BpB,qBAGR,uBAAK4G,UAAU,4BAAf,UACI,8CACA,kCACI,yBAAQC,QAAS,WAAQyK,GAAgB,KAAzC,eACA,gCAAO,IAAMvR,EAAWE,aAAamE,QAAQ,GAAK,MAClD,yBAAQyC,QAAS,WAAQyK,EAAe,KAAxC,qBAIR,sBAAK1K,UAAU,uCAAf,SACI,yBAAQA,UAAU,SAASC,QAASsK,EAApC,6B,SElDL,SAASM,GAAT,GAA4F,IAAtEC,EAAqE,EAArEA,OAAQC,EAA6D,EAA7DA,MAAOC,EAAsD,EAAtDA,KAAM/T,EAAgD,EAAhDA,MAAOgU,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,OAAQC,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YAMvF,OACI,uBAAKpL,UAAS,sBAAiBoL,EAAc,QAAU,IAAvD,UACI,sBAAKvC,IAAKiC,EAAQ7K,QAPZ,WACP+K,GACChH,OAAOqH,KAAKL,MAMXI,EACG,iCACI,qBAAIpL,UAAU,cAAd,SAA6B,kBAAqB,wBAClD,qBAAIA,UAAU,QAAd,SAAuB+K,OAG3B,qBAAI/K,UAAU,QAAd,SAAuB+K,IAE3B,uBAAKpK,MAAO,CAAE2K,KAAM,EAAGC,SAAU,cAAelC,QAAS,OAAQmC,UAAW,MAAO9K,OAAQ,QAA3F,UACKuK,EACG,eAAC,KAAD,CAAkBjL,UAAU,qBAE5B,eAAC,KAAD,CAAUA,UAAU,mBAAmBC,QAAS,kBAAMiL,EAAOjU,MAEjE,eAAC,IAAD,CAAe+I,UAAU,mBAAmBC,QAAS,kBAAMkL,EAAKlU,YC9BzE,IAAMwU,GAAW,4EAClBC,GACQD,GAAS,qB,gDAIhB,+BAAAE,EAAA,sEACoBzQ,MAAMwQ,GAAA,WAAiBE,KAAKC,OAAQ,CACvDC,OAAQ,QAFT,cACG3Q,EADH,OAIYA,EAAS4Q,OAJrB,SAKkB5Q,EAAS6Q,OAL3B,cAKGC,EALH,yBAMIA,GANJ,4C,+CCLQC,OCGA,WACX,OACI,sBAAKlM,UAAU,mBAAf,SACI,eAAC,KAAD,CAA2BA,UAAU,mBC8FlCkC,ICnGAiK,GDmGAjK,YACX,KACA,CAAE/C,eAAaQ,kBAAgByM,afrBP,SAAC9S,GAC3B,MAAO,CACLxC,KAAMP,EACNQ,QAAS,CAAEuC,eekBkC8F,eAAaC,gBAAcE,eAAaD,YAF1E4C,EAxFf,YAA8H,IAAtGqI,EAAqG,EAArGA,MAAO5K,EAA8F,EAA9FA,eAAgBR,EAA8E,EAA9EA,YAAaC,EAAiE,EAAjEA,YAAaC,EAAoD,EAApDA,aAAc+M,EAAsC,EAAtCA,aAAc7M,EAAwB,EAAxBA,YACjG,GADyH,EAAXD,QACtEmD,mBAAS,KAAjD,mBAAO4J,EAAP,KAAqBC,EAArB,KACA,EAA0C7J,qBAA1C,mBAAO8J,EAAP,KAAsBC,EAAtB,KACA,EAAoC/J,qBAApC,mBAAOgK,EAAP,KAAmBC,EAAnB,KACMxB,EAAS,SAACjU,GACZuV,EAAiBvV,GACjB,IAAM0V,EAAiBN,EAAapV,GAC9B2V,EAAeD,EAAeE,eAAsC,GAArBC,GAAe,IAYpE,GAXA/R,GAASgS,SAASH,EAAcD,EAAehV,UAAUqV,MAAK,SAACtW,GAC3DyI,EAAYzI,MAEZiW,EAAeM,UACftP,GAAgBoP,SAASH,EAAcD,EAAeM,WAAWD,MAAK,SAACtW,GACnEiJ,EAAejJ,MAInBiJ,EAAe,IAEfgN,EAAeO,MAAO,CACtB9N,EAAYuN,EAAeO,OAC3B,IAAMC,EAAWR,EAAeO,MAAMrS,QAAQ,YAAa,KAAO,SAClEwE,EAAa8N,GACb5N,EAAY,GAEhBgL,KAEEY,EAAO,SAAClU,GACV,IAAM0V,EAAiBN,EAAapV,GAChC0D,EAAMqJ,OAAOoJ,SAASC,OAAS,KAC7BC,KAAKX,EAAeO,OAAS,IAC7BI,KAAKX,EAAehV,SAAYmV,GAAe,IAAMH,EAAehV,SAAY,IAAM,IACtF2V,KAAKX,EAAeM,UAAaH,GAAe,IAAMH,EAAeM,UAAY,IACvFjJ,OAAOoJ,SAAS5C,KAAO7P,GAiB3B,OAVA4I,qBAAU,WAMN,OHrDD,WAAP,gCGgDQuJ,GAAsBE,MAAK,SAAChR,GAExBsQ,EAAgBtQ,EAAMtF,YAE1B0V,GAAa,GACN,WACHA,GAAa,MAElB,IAEC,sBAAKpM,UAAU,oBAAf,SACI,uBAAKA,UAAU,yBAAf,UACI,eAAC,IAAD,CAASA,UAAU,0BAA0BC,QAASsK,IACtD,sBAAKvK,UAAU,oCAAf,SACI,wBAAOA,UAAU,0BAA0BuN,SApBvC,SAACrN,GACjBwM,EAAcxM,EAAE8I,OAAOhN,MAAME,eAC7BgE,EAAEC,kBACFD,EAAEsN,sBAmBM,eAAC,IAAD,CAAUxN,UAAU,6BACpB,sBAAKA,UAAU,eAAf,SACI,gCAEQqM,GAAgBA,EAAarV,OAAS,EAClCqV,EAAa/U,KAAI,SAACmW,EAAMxW,GACpB,OAAOwV,IAAegB,EAAK1C,MAAM7O,cAAcX,SAASkR,GACpD,KAEA,eAAC5B,GAAD,CACIC,OAAQ2C,EAAKC,IACb3C,MAAO0C,EAAK1C,MACZC,KAAMyC,EAAKE,MACX1W,MAAOA,EACPmU,cAAeqC,EAAKP,MACpBjC,gBAA8B2C,IAAlBrB,GAA+BA,GAAiBtV,EAC5DiU,OAAQA,EACRC,KAAMA,OAGlB,sBAAKxK,MAAO,CAAEE,MAAO,OAAQD,SAAU,WAAYiN,aAAc,UAAjE,SACI,eAAC,GAAD,kB,MEsCrB3L,IC/HA4L,GD+HA5L,YACX,KACA,CAAE9C,eAAaC,gBAAcF,eAAaQ,kBAAgBL,WAASC,gBAFxD2C,EApHf,YAAiG,IAAjFvC,EAAgF,EAAhFA,eAAgBP,EAAgE,EAAhEA,YAAaC,EAAmD,EAAnDA,aAAcF,EAAqC,EAArCA,YAAaG,EAAwB,EAAxBA,QAASC,EAAe,EAAfA,YACvEwO,EAAahO,iBAAO,MACpBiO,EAAgBjO,iBAAO,MACvBkO,EAAclO,iBAAO,MACrBmO,EAAgBnO,iBAAO,MACvBoO,EAAmBpO,iBAAO,MAC1BqO,EAAiBrO,iBAAO,MAC9B,EAAsB0C,mBAAS,GAA/B,mBAAO4L,EAAP,KAAYC,EAAZ,KACA,EAA0B7L,oBAAS,GAAnC,mBAAO8L,EAAP,KAAcC,EAAd,KACA,EAAgC/L,oBAAS,GAAzC,mBAAO7I,EAAP,KAAiB6U,EAAjB,KACA,EAAwChM,oBAAS,GAAjD,mBAAOiM,EAAP,KAAqBC,EAArB,KACA,EAA0BlM,mBAAS,IAAnC,mBAAcmM,GAAd,WAwDA,OA3BArL,qBAAU,WACNrI,MAAM,eAAe8R,MAAK,SAAA6B,GACtBA,EAAI7C,OAAOgB,MAAK,SAAAzS,GACZqU,EAASrU,WAGlB,IAsBC,uBAAKyF,UAAU,SAAf,UACI,uBAAKA,UAAU,WAAf,UACI,yBAAQA,UAAU,UAAlB,kBAEA,uBAAKA,UAAU,mBAAf,UACI,wBAAOA,UAAU,SAAmBF,IAAKiO,EAAYjX,KAAK,OAAOyW,SA7D3D,SAACrN,GACnB,KAAIA,EAAE8I,OAAO8F,MAAM9X,OAAS,GAA5B,CAEA,IAAMY,EAAWmX,IAAIC,gBAAgB9O,EAAE8I,OAAO8F,MAAM,IAC9CjX,EAAYqI,EAAE8I,OAAO8F,MAAM,GAAGG,KACpC7P,EAAYxH,GACZyH,EAAaxH,GAEb,IAAMkR,EAAiBtR,aAAaC,QAAQG,IAAc,EAC1D0H,EAAY,GACZD,EAAQxE,OAAOiO,IACfuF,EAAOD,EAAM,MAkD8BA,GAC/B,wBAAOrO,UAAU,SAAmBF,IAAKkO,EAAelX,KAAK,OAAOyW,SAjD3D,SAACrN,GAClBA,EAAE8I,OAAO8F,MAAM9X,OAAS,IAC5B+D,GAASgS,SAASgC,IAAIC,gBAAgB9O,EAAE8I,OAAO8F,MAAM,KAAK9B,MAAK,SAACtW,GAC5DyI,EAAYzI,MAEhB4X,EAAOD,EAAM,MA4C8BA,GAC/B,wBAAOrO,UAAU,SAAmBF,IAAKmO,EAAanX,KAAK,OAAOyW,SA3C3D,SAACrN,GACpB,KAAIA,EAAE8I,OAAO8F,MAAM9X,OAAS,GAA5B,CACA,IAAMkY,EAAYH,IAAIC,gBAAgB9O,EAAE8I,OAAO8F,MAAM,IACrDnR,GAAgBoP,SAASmC,GAAWlC,MAAK,SAACtW,GACtCiJ,EAAejJ,MAEnB4X,EAAOD,EAAM,MAqC8BA,GAC/B,oBAAG7D,KAAK,IAAIvK,QAAS,kBAAM8N,EAAW1N,QAAQ8O,SAA9C,wBACA,oBAAG3E,KAAK,IAAIvK,QAAS,kBAAM+N,EAAc3N,QAAQ8O,SAAjD,2BACA,oBAAG3E,KAAK,IAAIvK,QAAS,kBAAMgO,EAAY5N,QAAQ8O,SAA/C,+BAGR,uBAAKnP,UAAU,WAAf,UACI,yBAAQA,UAAU,UAAlB,iBAEA,uBAAKA,UAAU,yBAAf,UACI,gCAAO,YACP,wBAAOF,IAAKoO,EAAepX,KAAK,SAChC,wBACA,gCAAO,eACP,wBAAOgJ,IAAKqO,EAAkBrX,KAAK,SACnC,wBACA,gCAAO,aACP,wBAAOgJ,IAAKsO,EAAgBtX,KAAK,SACjC,wBACA,oBAAG0T,KAAK,IAAIvK,QA/CX,WACb,IAAMmP,EAASlB,EAAc7N,QAAQrE,MAC/BqT,EAASlB,EAAiB9N,QAAQrE,MAClCsT,EAASlB,EAAe/N,QAAQrE,MAElCoT,IACAhQ,EAAYgQ,GACZ/P,EAAa,QAEbiQ,GACA3R,GAAgBoP,SAASuC,GAAQtC,MAAK,SAACtW,GACnCiJ,EAAejJ,MAGnB2Y,GACAtU,GAASgS,SAASsC,GAAQrC,MAAK,SAACtW,GAC5ByI,EAAYzI,OA+BR,wBAGR,sBAAKsJ,UAAU,WAAf,SACI,yBAAQA,UAAU,eAAeC,QAAS,WAAQ0O,GAAgB,IAAlE,qBAGJ,sBAAK3O,UAAU,WAAf,SACI,yBAAQA,UAAU,UAAUC,QAAS,WAAQwO,GAAY,IAAzD,wBAGJ,sBAAKzO,UAAU,WAAf,SACI,yBAAQA,UAAU,UAAUC,QAAS,WAAQuO,GAAS,IAAtD,qBAGHD,GAAS,eAAC,GAAD,CAAOhE,MAAO,WAAQiE,GAAS,MACxC5U,GAAY,eAAC,GAAD,CAAU2Q,MAAO,WAAQkE,GAAY,MACjDC,GAAgB,eAAC,GAAD,CAAcnE,MAAO,WAAQoE,GAAgB,YExH3D,SAASY,GAAT,GAAwF,IAAjEnY,EAAgE,EAAhEA,OAAe6T,GAAiD,EAAxDhU,MAAwD,EAAjDgU,YAAYuE,EAAqC,EAArCA,WAAYC,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,WACjFC,EAAYvY,EAAOkF,KAAKpC,MAAM,KAC9B0V,EAAUxY,EAAOmF,GAAGrC,MAAM,KAC9B,EAA0BuI,mBAAS,CAC/BoN,GAAKF,EAAU,GACfG,GAAKH,EAAU,GACfI,GAAKJ,EAAU,GACfK,GAAKJ,EAAQ,GACbK,GAAKL,EAAQ,GACbM,GAAKN,EAAQ,GACb9Y,KAAOM,EAAOoF,KACdH,UAAYjF,EAAOqF,YARvB,mBAAO7F,EAAP,KAAcyR,EAAd,KAWM8H,EAAc,SAACjQ,GACjB,IAAMkQ,EAAQ,2BAAOxZ,GAAP,kBAAesJ,EAAE8I,OAAOiG,KAAM/O,EAAE8I,OAAOhN,QACrDqM,EAAS+H,GACT,IAAMhW,EAAOgW,EAASP,GAAK,IAAMO,EAASN,GAAK,IAAMM,EAASL,GACxDzV,EAAK8V,EAASJ,GAAK,IAAMI,EAASH,GAAK,IAAMG,EAASF,GACtDpZ,EAAOsZ,EAAStZ,KAChBuF,EAAY+T,EAAS/T,UAC3BjF,EAAOkF,KAAOlC,EACdhD,EAAOmF,GAAKjC,EACZlD,EAAOoF,KAAO1F,EACdM,EAAOqF,UAAYJ,GAWjBgU,EAAS,WACXX,EAAWtY,IAGf,OACI,gCACI,gCACI,wBAAOkZ,cAAeD,EAAQ9C,SAAU4C,EAAanQ,UAAU,KAASiP,KAAK,KAAKjT,MAAOpF,EAAMiZ,KADnG,YAEI,wBAAOS,cAAeD,EAAQ9C,SAAU4C,EAAanQ,UAAU,KAASiP,KAAK,KAAKjT,MAAOpF,EAAMkZ,KAFnG,YAGI,wBAAOQ,cAAeD,EAAQ9C,SAAU4C,EAAanQ,UAAU,SAASiP,KAAK,KAAKjT,MAAOpF,EAAMmZ,QAEnG,gCACI,wBAAOO,cAAeD,EAAQ9C,SAAU4C,EAAcnQ,UAAU,KAASiP,KAAK,KAAKjT,MAAOpF,EAAMoZ,KADpG,YAEI,wBAAOM,cAAeD,EAAQ9C,SAAU4C,EAAcnQ,UAAU,KAASiP,KAAK,KAAKjT,MAAOpF,EAAMqZ,KAFpG,YAGI,wBAAOK,cAAeD,EAAQ9C,SAAU4C,EAAcnQ,UAAU,SAASiP,KAAK,KAAKjT,MAAOpF,EAAMsZ,QAEpG,8BACI,0BAAQlQ,UAAU,aAAasQ,cAAeD,EAAQ9C,SAAU4C,EAAalB,KAAK,OAAOjT,MAAOpF,EAAME,KAAtG,UACQ,yBAAQkF,MAAOL,GAAUC,SAAW2U,SAAUnZ,EAAOoF,OAASb,GAAUC,SAAxE,SAAmFD,GAAUC,WAC7F,yBAAQI,MAAOL,GAAUE,OAAW0U,SAAUnZ,EAAOoF,OAASb,GAAUE,OAAxE,SAAiFF,GAAUE,SAC3F,yBAAQG,MAAOL,GAAUG,UAAWyU,SAAUnZ,EAAOoF,OAASb,GAAUG,UAAxE,SAAoFH,GAAUG,iBAG1G,8BACI,0BAAQkE,UAAU,aAAasQ,cAAeD,EAAQ9C,SAAU4C,EAAalB,KAAK,YAAYjT,MAAOpF,EAAMyF,UAA3G,UACQ,yBAAQL,MAAOR,GAAeE,IAAO6U,SAAUnZ,EAAOqF,YAAcjB,GAAeE,IAAnF,SAAyFF,GAAeE,MACxG,yBAAQM,MAAOR,GAAeC,KAAO8U,SAAUnZ,EAAOqF,YAAcjB,GAAeC,KAAnF,SAA0FD,GAAeC,YAGrH,8BACA,sBAAKuE,UAAU,mBAAmBC,QAtCzB,WACbuP,EAAWpY,IAqC8CuJ,MAAO,CAACa,OAAO,UAApE,SACI,eAAC,KAAD,CAASxB,UAAU,eAGvB,8BACA,sBAAKA,UAAU,mBAAmBC,QAvCzB,WACbwP,EAAWrY,IAsC8CuJ,MAAO,CAACa,OAAO,UAApE,SACKyJ,EAAa,eAAC,KAAD,CAAOjL,UAAU,WAAa,eAAC,KAAD,CAAUA,UAAU,kB,UC/D1E+B,GACC,GADDA,GAEC,GAFDA,GAGY,IAHZA,GAIa,IAuKnB,ICtLeyO,GD8LAtO,aARS,SAAAtL,GACpB,IAAMF,EAAUuH,GAAcrH,GACxBiB,EAAYuG,GAAgBxH,GAGlC,MAAO,CAAEF,UAASoB,KAFLuG,GAAWzH,GAEAiB,YAAWyB,UADjBsF,GAAgBhI,MAIE,CAAE8I,kBAAgB+Q,kBpBrFzB,SAAAxZ,GAAK,MAAK,CACzCH,KAAMX,EACNY,QAAS,CAAEE,WoBmFgEyZ,iBpBhF7C,iBAAO,CACrC5Z,KAAMV,EACNW,QAAS,KoB8EoF4Z,iBpB3E/D,SAACvZ,EAAQH,GAAT,MAAoB,CAClDH,KAAMT,EACNU,QAAS,CAAEK,SAAQH,YoByENiL,EA3Kf,YAA2I,IAA/GxL,EAA8G,EAA9GA,QAASoB,EAAqG,EAArGA,KAAMD,EAA+F,EAA/FA,UAAW6H,EAAoF,EAApFA,eAAgB+Q,EAAoE,EAApEA,kBAAmBC,EAAiD,EAAjDA,iBAAkBC,EAA+B,EAA/BA,iBAAkBrX,EAAa,EAAbA,UACzH,EAA4CmJ,mBAAS,MAArD,mBAAOkK,EAAP,KAAuBiE,EAAvB,KACA,EAAsBnO,mBAAS,GAA/B,mBAAO4L,EAAP,KAAYwC,EAAZ,KACA,EAAgCpO,mBAAS,MAAzC,mBAAOQ,EAAP,KAAiBC,EAAjB,KAEAK,qBAAU,WACN,IAAGjK,GAAc2J,EACjB,OAAQA,EAASY,SACb,KAAK9B,GAEG+O,IAEJ,MACJ,KAAK/O,GAEOkB,EAASU,QAEToN,IAIAtB,EAAW/Y,EAAQ,IAG3B,MACJ,KAAKqL,GAEGiP,EAAU,QAEd,MACJ,KAAKjP,GAEGiP,EAAU,SAIvB,CAAC/N,IAEJM,qBAAU,WACN,IAOMQ,EAAgB,SAAC7D,GACnBgD,EAAYhD,IAGhB,OADA8D,OAAOC,iBAAiB,UAAWF,GAC5B,WACHC,OAAOE,oBAAoB,UAAWH,MAE3C,IAEH,IAAM+M,EAAU,WACZ,IAAM5Z,EAAa,CAAC,IAAIkF,IAGxB,OAFAsD,EAAexI,GACf2Z,EAAOxC,EAAM,GACNnX,GAOLsY,EAAa,SAACpY,GAChB,IAAMH,EAAQP,EAAQua,QAAQ7Z,IACf,IAAXH,IAEJwZ,EAAkBxZ,GAClB4Z,EAAOxC,EAAM,KAGXoB,EAAa,SAACrY,GAChB,IAAMH,EAAQP,EAAQua,QAAQ7Z,IACf,IAAXH,EAKAP,EAAQO,KAAW0V,EACnBiE,EAAkB,MAGlBA,EAAkBxZ,GARlBwZ,EAAkB,OAYpBI,EAAY,SAACpQ,GACf,GAAK+L,EAAL,CAEA,IAAM1V,EAAQP,EAAQua,QAAQtE,IACf,IAAX1V,IAEa,SAAb2J,EACA+L,EAAevP,YAAYtF,GAG3B6U,EAAelP,UAAU3F,GAE7B4X,EAAW/C,EAAgB1V,MAGzByY,EAAa,SAACtY,EAAQH,GACnBG,IAAqB,IAAXH,IACf0Z,EAAiBvZ,EAAQH,GACzB4Z,EAAOxC,EAAM,KAGX0C,EAAY,WACd,IAAMG,EAAUvM,SAASwM,cAAc,KACjCC,EAAO,IAAIC,KAAK,CAAC1T,GAAgB1B,SAASvF,IAAW,CAAEI,KAAM,eACnEoa,EAAQ1G,KAAOuE,IAAIC,gBAAgBoC,GACnCF,EAAQI,SAAWzZ,EAAU,OAC7B8M,SAAS4M,KAAKC,YAAYN,GAC1BA,EAAQ/B,SAGZ,OACI,uBAAKnP,UAAU,mBAAf,UACI,sBAAKA,UAAU,YAAYC,QAAS6Q,EAApC,SACI,eAAC,KAAD,CAAQ9Q,UAAU,aAEtB,sBAAKA,UAAU,YAAYC,QAAS8Q,EAApC,SACI,eAAC,KAAD,CAAQ/Q,UAAU,aAEtB,sBAAKA,UAAU,YAAYC,QAAS,kBAAM+Q,EAAU,SAApD,SACI,eAAC,KAAD,CAAgBhR,UAAU,SAASW,MAAQgM,EAA6D,GAA5C,CAAE/G,cAAe,OAAQxE,QAAS,WAElG,sBAAKpB,UAAU,YAAYC,QAAS,kBAAM+Q,EAAU,OAApD,SACI,eAAC,KAAD,CAAehR,UAAU,SAASW,MAAQgM,EAA6D,GAA5C,CAAE/G,cAAe,OAAQxE,QAAS,WAEjG,sBAAKpB,UAAU,gBAAgBC,QAAS,WAtE5CyQ,KAsEI,SACI,eAAC,KAAD,CAAS1Q,UAAU,aAEvB,wBAAM,wBACN,sBAAKA,UAAU,kBAAf,SACI,mCACI,gCACI,uCACA,qCACA,uCACA,+CAGAtJ,EAAQY,KAAI,SAACF,EAAQH,GACjB,OAAO,eAACsY,GAAD,CACHtY,MAAOA,EACPG,OAAQA,EACR6T,WAAY0B,IAAmBvV,EAC/BoY,WAAYA,EACZE,WAAYA,EACZD,WAAYA,WAhBMpB,S,MEhFlD,IC5EeoD,GDiFAvP,aALS,SAAAtL,GAEpB,MAAO,CAAEwB,aADYmG,GAAmB3H,MAIJ,CAAE8a,gBtBPX,SAACtZ,GAC9B,MAAO,CACLtB,KAAMd,EACNe,QAAS,CAAEqB,mBsBIA8J,EAvEf,YAAwD,IAAjC9J,EAAgC,EAAhCA,aAAcsZ,EAAkB,EAAlBA,gBAE3BnE,EAAW,SAACrN,GACd,IAAIyR,EAAcvZ,EAAaG,SAAS,GACpB,UAAjB2H,EAAE8I,OAAOiG,KAAkB0C,EAAcvZ,EAAaI,OAAO,GACvC,aAAjB0H,EAAE8I,OAAOiG,OAAqB0C,EAAcvZ,EAAaK,UAAU,IAC3EiZ,EAAgB,eAAExR,EAAE8I,OAAOiG,KAAO,CAAC/O,EAAE8I,OAAOhN,MAAO2V,MAGjDC,EAAY,SAAC1R,GACf,IAAI2R,EAAazZ,EAAaG,SAAS,GACnB,UAAjB2H,EAAE8I,OAAOiG,KAAkB4C,EAAazZ,EAAaI,OAAO,GACtC,aAAjB0H,EAAE8I,OAAOiG,OAAqB4C,EAAazZ,EAAaK,UAAU,IAC1EiZ,EAAgB,eAAExR,EAAE8I,OAAOiG,KAAO,CAAC4C,EAAY3R,EAAE8I,OAAOhN,UAGtD8V,EAAgB,CAClB,yBAAQ9V,MAAOxF,EAAf,SAAoCA,IACpC,yBAAQwF,MAAOxF,EAAf,SAA0CA,IAC1C,yBAAQwF,MAAOxF,EAAf,SAA4CA,IAC5C,yBAAQwF,MAAOxF,EAAf,SAA+CA,IAC/C,yBAAQwF,MAAOxF,EAAf,SAAqCA,IACrC,yBAAQwF,MAAOxF,EAAf,SAAoCA,IACpC,yBAAQwF,MAAOxF,EAAf,SAAwCA,KAGtCub,EAAgB,CAClB,yBAAQ/V,MAAOxF,EAAf,SAAoCA,IACpC,yBAAQwF,MAAOxF,EAAf,SAAwCA,KAG5C,OACI,uBAAKwJ,UAAU,SAAf,UACI,uBAAKA,UAAU,OAAf,UACI,6CACA,yBAAQuN,SAAUA,EAAU0B,KAAK,WAAWjT,MAAO5D,EAAaG,SAAS,GAAzE,SACKuZ,EAAcxa,KAAI,SAAC0a,GAAD,OAAYA,OAEnC,yBAAQzE,SAAUqE,EAAW3C,KAAK,WAAWjT,MAAO5D,EAAaG,SAAS,GAA1E,SACKwZ,EAAcza,KAAI,SAAC0a,GAAD,OAAYA,UAIvC,uBAAKhS,UAAU,OAAf,UACI,2CACA,yBAAQuN,SAAUA,EAAU0B,KAAK,SAASjT,MAAO5D,EAAaI,OAAO,GAArE,SACKsZ,EAAcxa,KAAI,SAAC0a,GAAD,OAAYA,OAEnC,yBAAQzE,SAAUqE,EAAW3C,KAAK,SAASjT,MAAO5D,EAAaI,OAAO,GAAtE,SACKuZ,EAAcza,KAAI,SAAC0a,GAAD,OAAYA,UAIvC,uBAAKhS,UAAU,OAAf,UACI,8CACA,yBAAQuN,SAAUA,EAAU0B,KAAK,YAAYjT,MAAO5D,EAAaK,UAAU,GAA3E,SACKqZ,EAAcxa,KAAI,SAAC0a,GAAD,OAAYA,OAEnC,yBAAQzE,SAAUqE,EAAW3C,KAAK,YAAYjT,MAAO5D,EAAaK,UAAU,GAA5E,SACKsZ,EAAcza,KAAI,SAAC0a,GAAD,OAAYA,gB,MErEpCC,OCEA,YAAgD,IAAzBC,EAAwB,EAAxBA,GAAIjS,EAAoB,EAApBA,QAASkS,EAAW,EAAXA,SAC/C,OACI,uBAAKnS,UAAU,mBAAf,UACI,yBAAOoS,MAAM,SAAb,UACI,wBAAOtb,KAAK,WAAWub,UAAWH,EAAKjS,QAASA,IAChD,uBAAMmS,MAAM,oBAEhB,sBAAKpS,UAAU,QAAf,SAAwBmS,QCQ9BpQ,GACD,GADCA,GAED,GAwHL,IAMeG,gBANS,SAAAtL,GAGtB,MAAO,CAAE0C,UAFSsF,GAAgBhI,GAEd2C,UADFsF,GAAqBjI,MAMvC,CAAE8I,kBAAgBN,eAAaD,eAAaI,eAAaD,WAASD,iBAFrD6C,EA3Hf,SAAa0F,GAEX,IAIQlI,EAAuGkI,EAAvGlI,eAAgBN,EAAuFwI,EAAvFxI,YAAaC,EAA0EuI,EAA1EvI,aAAcF,EAA4DyI,EAA5DzI,YAAwB5F,GAAoCqO,EAA/CtO,UAA+CsO,EAApCrO,WAC3E,GAD+GqO,EAAzBrI,YAAyBqI,EAAZtI,QAC/DmD,oBAAS,IAA7C,mBAAO6P,EAAP,KAAmBC,EAAnB,KACA,EAAoC9P,oBAAS,GAA7C,mBAAO+P,EAAP,KAAmBC,EAAnB,KACA,EAAsChQ,mBAAS,GAA/C,mBACA,GADA,UACgCA,mBAAS,OAAzC,mBAAOQ,EAAP,KAAiBC,EAAjB,KAEMpD,EAAMC,iBAAO,MAEb2S,EAAU,WACd,IAAIC,EAAW,GACXC,EAAc,GACd1D,EAAY,GACV2D,EAAY7O,OAAOoJ,SAAS0F,KAE5BC,EAASF,EAAU3Y,MAAM,KAC/B,GAAqB,GAAjB6Y,EAAO/b,SAAiC,GAAjB+b,EAAO/b,QAAmC,GAApB+b,EAAO,GAAG/b,QAA3D,CAaA,GAZiB,KAAb6b,GAAoBE,EAAO/b,QAAU,IACnC+b,EAAO,IAAMA,EAAO,GAAG/b,OAAS,IAClC2b,EAAWK,KAAKD,EAAO,KAErBA,EAAO,IAAMA,EAAO,GAAG/b,OAAS,IAClC4b,EAAcI,KAAKD,EAAO,KAExBA,EAAO,IAAMA,EAAO,GAAG/b,OAAS,IAClCkY,EAAY8D,KAAKD,EAAO,MAIzBJ,EAAS,CACV,IAAMxF,EAAWwF,EAAS9X,QAAQ,YAAa,KAAO,SACtDuE,EAAYuT,GACZtT,EAAa8N,GAGXyF,EAAY1W,cAAc+W,WAAW,QACvClY,GAASgS,SAAS6F,GAAa5F,MAAK,SAACtW,GACnCyI,EAAYzI,MAGdyI,EAAY,IAGV+P,EAAUhT,cAAc+W,WAAW,QACrCtV,GAAgBoP,SAASmC,GAAWlC,MAAK,SAACtW,GACxCgJ,EAAehJ,MAGjBiJ,GAAe,MAqCnB,OAjCA4D,qBAAU,WACRmP,MACC,IAEHnP,qBAAU,WACRS,OAAOkP,aAAe,WACpBR,OAED,IAEHnP,qBAAU,WAER,IADsBqE,EAAdtO,WACU2J,EAClB,OAAQA,EAASY,SACf,KAAK9B,GACHwQ,GAAeD,GACf,MACF,KAAKvQ,GACH0Q,GAAeD,MAGlB,CAACvP,IAEJM,qBAAU,WACR,IAAMQ,EAAgB,SAAC7D,GACrBgD,EAAYhD,IAGd,OADA8D,OAAOC,iBAAiB,UAAWF,GAC5B,WACLC,OAAOE,oBAAoB,UAAWH,MAEvC,CAACuO,EAAYE,IAGd,uBAAKxS,UAAU,MAAMF,IAAKA,EAA1B,UACE,eAAC,GAAD,IACCvG,GACC,sBAAKoH,MAAO,CAAEC,SAAU,WAAYU,KAAM,MAAOb,IAAK,MAAO0S,UAAW,sCAAxE,SAAgH,eAAC,GAAD,MAElH,uBAAKxS,MAAO,CAAES,QAAS7H,EAAY,EAAI,GAAvC,UACE,sBAAKoH,MAAO,CAAEE,MAAO,OAAQW,OAAQ,SAAUP,UAAW,QAA1D,SACE,eAAC,GAAD,MAEF,eAAC,GAAD,CAAciR,GAAII,EAAYrS,QAAS,WAAQsS,GAAeD,IAA9D,oBACA,eAAC,GAAD,CAAcJ,GAAIM,EAAYvS,QAAS,WAAQwS,GAAeD,IAA9D,oBACCF,GACC,sBAAKtS,UAAU,mBAAf,SACE,eAAC,GAAD,MAGHwS,GACC,sBAAKxS,UAAU,mBAAf,SACE,eAAC,GAAD,eCxHGoT,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBtG,MAAK,YAAkD,IAA/CuG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCCdO,IAAS1L,OACP,eAAC,IAAM2L,WAAP,UACE,eAAC,IAAD,CAAU7U,MAAOA,GAAjB,SACA,eAAC,GAAD,QAGF2F,SAASmP,eAAe,SAM1BV,O","file":"static/js/main.48e06d18.chunk.js","sourcesContent":["export const SET_SUBTITLE = \"SET_SUBTITLE\";\r\nexport const VIDEO_SRC = \"VIDEO_SRC\";\r\nexport const VIDEO_SRC_NAME = \"VIDEO_SRC_NAME\";\r\nexport const VIDEO_IS_LOADING = \"VIDEO_IS_LOADING\";\r\nexport const SET_TIME = \"SET_TIME\";\r\nexport const SET_DURATION = \"SET_DURATION\";\r\nexport const SET_VOLUME = \"SET_VOLUME\";\r\nexport const SET_MUTE = \"SET_MUTE\";\r\nexport const SET_SPEED = \"SET_SPEED\";\r\nexport const SET_PLAYER_STATE = \"SET_PLAYER_STATE\";\r\nexport const SET_PLAYER_CONFIG = \"SET_PLAYER_CONFIG\";\r\nexport const ADD_ITEMS = \"ADD_ITEMS\";\r\nexport const SET_ITEMS = \"SET_ITEMS\";\r\nexport const REMOVE_ITEM_INDEX = \"REMOVE_ITEM_INDEX\";\r\nexport const REMOVE_ALL = \"REMOVE_ALL\";\r\nexport const UPDATE_ITEM = \"UPDATE_ITEM\";\r\nexport const SET_FONT_CONFIG = \"SET_FONT_CONFIG\";\r\nexport const SET_MODAL_OPEN = \"SET_MODAL_OPEN\";\r\n\r\nexport const PLAYER_ACTION = {\r\n    BLUR : 'Blur',\r\n    BLUR_EXTRA : 'Blur Extra',\r\n    BLUR_EXTREME : 'Blur Extreme',\r\n    BLUR_EXTREME_X2 : 'Blur Extreme_X2',\r\n    BLACK : 'Black screen',\r\n    SKIP : 'Skip',\r\n    MUTE : 'Mute',\r\n    NOACTION : 'No Action',\r\n  }","import { ADD_ITEMS, SET_ITEMS, REMOVE_ITEM_INDEX, REMOVE_ALL, UPDATE_ITEM } from \"../actionTypes\";\r\n\r\nconst initialState = {\r\n  records: [],\r\n};\r\n\r\nconst SceneFilter = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case ADD_ITEMS: {\r\n      const { records } = action.payload;\r\n      return {\r\n        ...state,\r\n        records: [...records, ...state.records],\r\n      };\r\n    }\r\n    case SET_ITEMS: {\r\n      const { records } = action.payload;\r\n      return {\r\n        ...state,\r\n        records: (records && records.length > 0) ? [...records] : [],\r\n      };\r\n    }\r\n    case REMOVE_ITEM_INDEX: {\r\n        const { index } = action.payload;\r\n        const newRecords = state.records.filter((record, i) => i!==index);\r\n        return {\r\n          ...state,\r\n          records: [...newRecords],\r\n        };\r\n      }\r\n    case REMOVE_ALL: {\r\n        return {\r\n          ...state,\r\n          records: [],\r\n        };\r\n      }\r\n    case UPDATE_ITEM: {\r\n        const { index, record } = action.payload;\r\n        const newRecords = state.records.map((r, i) => i===index ? record : r);\r\n        return {\r\n          ...state,\r\n          records: [...newRecords],\r\n        };\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default SceneFilter;\r\n","import { SET_SUBTITLE, VIDEO_SRC, VIDEO_IS_LOADING, VIDEO_SRC_NAME, SET_TIME, SET_DURATION, SET_VOLUME, SET_MUTE, SET_SPEED, SET_PLAYER_STATE, SET_PLAYER_CONFIG, PLAYER_ACTION } from \"../actionTypes\";\r\n\r\n\r\nconst playerConfigJSON = localStorage.getItem(\"playerConfig\");\r\nconst savedPlayerConfig = playerConfigJSON ? JSON.parse(playerConfigJSON) : {\r\n  violence: [PLAYER_ACTION.BLUR, PLAYER_ACTION.NOACTION],\r\n  nudity: [PLAYER_ACTION.SKIP, PLAYER_ACTION.MUTE],\r\n  profanity: [PLAYER_ACTION.NOACTION, PLAYER_ACTION.MUTE],\r\n}\r\n\r\nconst initialState = {\r\n  subtitle: [],\r\n  videoSrc: null,\r\n  videoName: '',\r\n  time: 0,\r\n  duration: 0,\r\n  volume: 1.0,\r\n  mute: false,\r\n  speed: 1.0,\r\n  playerState: 'pause',\r\n  playerConfig: savedPlayerConfig\r\n};\r\n\r\nconst Media = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_SUBTITLE: {\r\n      const { subtitle } = action.payload;\r\n      return {\r\n        ...state,\r\n        subtitle: subtitle,\r\n      };\r\n    }\r\n    case VIDEO_SRC: {\r\n      const { videoSrc } = action.payload;\r\n      return {\r\n        ...state,\r\n        videoSrc: videoSrc,\r\n        videoIsLoading: videoSrc!=state.videoSrc,\r\n      };\r\n    }\r\n    case VIDEO_IS_LOADING: {\r\n      const { videoIsLoading } = action.payload;\r\n      return {\r\n        ...state,\r\n        videoIsLoading,\r\n      };\r\n    }\r\n    case VIDEO_SRC_NAME: {\r\n      const { videoName } = action.payload;\r\n      return {\r\n        ...state,\r\n        videoName: videoName,\r\n      };\r\n    }\r\n    case SET_TIME: {\r\n      let { time } = action.payload;\r\n      time = Math.max(time, 0);\r\n      if (state.duration) {\r\n        time = Math.min(time, state.duration);\r\n      }\r\n      return {\r\n        ...state,\r\n        time: time,\r\n      };\r\n    }\r\n    case SET_DURATION: {\r\n      const { duration } = action.payload;\r\n      return {\r\n        ...state,\r\n        duration: duration,\r\n      };\r\n    }\r\n    case SET_VOLUME: {\r\n      const { volume } = action.payload;\r\n      const limitedVolume = Math.min(1, Math.max(volume, 0));\r\n      return {\r\n        ...state,\r\n        volume: limitedVolume,\r\n      };\r\n    }\r\n    case SET_MUTE: {\r\n      const { mute } = action.payload;\r\n      return {\r\n        ...state,\r\n        mute,\r\n      };\r\n    }\r\n    case SET_PLAYER_STATE: {\r\n      const { playerState } = action.payload;\r\n      return {\r\n        ...state,\r\n        playerState: playerState,\r\n      };\r\n    }\r\n    case SET_PLAYER_CONFIG: {\r\n      const { playerConfig } = action.payload;\r\n      localStorage.setItem(\"playerConfig\", JSON.stringify({ ...state.playerConfig, ...playerConfig }));\r\n      return {\r\n        ...state,\r\n        playerConfig: { ...state.playerConfig, ...playerConfig },\r\n      };\r\n    }\r\n    case SET_SPEED: {\r\n      const { speed } = action.payload;\r\n      return {\r\n        ...state,\r\n        speed,\r\n      }\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default Media;\r\n","import { SET_FONT_CONFIG, SET_MODAL_OPEN } from \"../actionTypes\";\r\n\r\nconst fontConfigJSON = localStorage.getItem(\"fontConfig\");\r\nconst savedFontConfig = fontConfigJSON ? JSON.parse(fontConfigJSON) : {\r\n  size: 40,\r\n  transparency: 0.7,\r\n};\r\nconst initialState = {\r\n  fontConfig: savedFontConfig,\r\n  modalOpen: false,\r\n  isLoading: false,\r\n};\r\n\r\nconst Settings = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case SET_FONT_CONFIG: {\r\n      const { fontConfig } = action.payload;\r\n      localStorage.fontConfig = JSON.stringify(fontConfig);\r\n      return {\r\n        ...state,\r\n        fontConfig,\r\n      };\r\n    }\r\n    case SET_MODAL_OPEN: {\r\n      const { modalOpen } = action.payload;\r\n      return {\r\n        ...state,\r\n        modalOpen: modalOpen,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n","import { combineReducers } from \"redux\";\r\nimport sceneFilter from \"./sceneFilter\";\r\nimport media from \"./media\";\r\nimport settings from \"./settings\";\r\n\r\nexport default combineReducers({ sceneFilter, media, settings });\r\n","import { createStore } from \"redux\";\r\nimport rootReducer from \"./reducers\";\r\n\r\nexport default createStore(rootReducer);","class SrtRecord {\r\n  static ConvertToTime(str) {\r\n    let time = 0;\r\n    let strs;\r\n    str = str.replace(\",\", \":\");\r\n    str = str.replace(\".\", \":\");\r\n    str = str.replace(\" \", \"\");\r\n    strs = str.split(\":\");\r\n    time += Number(strs[0]) * 60 * 60 * 1000;\r\n    time += Number(strs[1]) * 60 * 1000;\r\n    time += Number(strs[2]) * 1000;\r\n    time += Number(strs[3]);\r\n\r\n    return time;\r\n  }\r\n  /**\r\n   * Replace SRT tags like 'font color', 'b', 'i', 'u',\r\n   * @param {String} content\r\n   * @returns content with replaced tags\r\n   */\r\n  static ResolveTags(content){\r\n    // FIXME handle b,i,u cases\r\n    content = content.replace('<font color=\"', '<span style=\"color:');\r\n    content = content.replace('</font>', '</span>');\r\n    return content;\r\n  }\r\n  constructor(lines, index) {\r\n    let timeFields = lines[index].split(\"-->\");\r\n    this.from = SrtRecord.ConvertToTime(timeFields[0]);\r\n    this.to = SrtRecord.ConvertToTime(timeFields[1]);\r\n    this.content = [];\r\n    while((lines.length > (index + 1 + this.content.length)) && lines[index + 1 + this.content.length].length !== 0){\r\n      const contentValue = lines[index + 1 + this.content.length];\r\n      this.content.push(SrtRecord.ResolveTags(contentValue));\r\n    }\r\n  }\r\n}\r\nclass SrtClass {\r\n  /**\r\n   *\r\n   * @param {string} url path to srt file\r\n   */\r\n  static async ReadFile(url) {\r\n    let recordsRaw = [];\r\n    let records = [];\r\n\r\n    const response = await fetch(url);\r\n    const data = await response.text();\r\n\r\n    var text = data;\r\n    recordsRaw = text.split(\"\\n\");\r\n    for (let i = 0; i < recordsRaw.length; i++) {\r\n      recordsRaw[i] = recordsRaw[i].replace('\\n','');\r\n      recordsRaw[i] = recordsRaw[i].replace('\\r','');\r\n    }\r\n\r\n    let i = 0;\r\n    let recordIndex = 0;\r\n    while (i < recordsRaw.length) {\r\n        if(!recordsRaw[i].includes(' --> '))\r\n        {\r\n          i++;\r\n          continue;\r\n        }\r\n\r\n        records[recordIndex] = new SrtRecord(recordsRaw, i);\r\n        i += records[recordIndex].content.length + 1;\r\n        recordIndex++;\r\n    }\r\n\r\n    return records;\r\n  }\r\n\r\n  static GetContentAt(records, time) {\r\n    time *= 1000;\r\n    //ali.m FIXME, use binary search + sort records\r\n    if (records) {\r\n      for (let i = 0; i < records.length; i++) {\r\n        var record = records[i];\r\n        if (time >= record.from && time <= record.to) {\r\n          return record.content;\r\n        }\r\n      }\r\n    }\r\n\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default SrtClass;\r\n","const SceneIntensity = {\r\n    High: \"High\",\r\n    Low: \"Low\"\r\n}\r\n\r\nconst SceneType = {\r\n    Violence: \"violence\",\r\n    Nudity: \"nudity\",\r\n    Profanity: \"profanity\"\r\n}\r\n\r\nSceneIntensity.FromString = function (value) {\r\n    switch (value) {\r\n        case SceneIntensity.High:\r\n            return SceneIntensity.High;\r\n        case SceneIntensity.Low:\r\n            return SceneIntensity.Low;\r\n        default:\r\n            return SceneIntensity.Low;\r\n    }\r\n}\r\n\r\nSceneIntensity.ToString = function (value) {\r\n    switch (value) {\r\n        case SceneIntensity.High:\r\n            return SceneIntensity.High;\r\n        case SceneIntensity.Low:\r\n            return SceneIntensity.Low;\r\n        default:\r\n            return SceneIntensity.Low;\r\n    }\r\n}\r\n\r\n\r\n\r\nSceneType.FromString = function (value) {\r\n    switch (value.toLowerCase()) {\r\n        case SceneType.Violence:\r\n            return SceneType.Violence;\r\n        case SceneType.Nudity:\r\n            return SceneType.Nudity;\r\n        case SceneType.Profanity:\r\n            return SceneType.Profanity;\r\n        default:\r\n            return SceneType.Violence;\r\n    }\r\n}\r\n\r\nSceneType.ToString = function (value) {\r\n    switch (value.toLowerCase()) {\r\n        case SceneType.Violence:\r\n            return SceneType.Violence;\r\n        case SceneType.Nudity:\r\n            return SceneType.Nudity;\r\n        case SceneType.Profanity:\r\n            return SceneType.Profanity;\r\n        default:\r\n            return SceneType.Violence;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n/***************************************************************\r\n ******************* SceneGuideRecord Class *******************\r\n ***************************************************************/\r\nvar id = 1;\r\nvar SceneGuideRecord = function (from, to, intensity, type) {\r\n    from = from || \"00:00:00.000\";\r\n    to = to || \"00:00:00.000\";\r\n    intensity = intensity || SceneIntensity.Low;\r\n    type = type || SceneType.Nudity;\r\n\r\n    this.From = from;\r\n    this.To = to;\r\n    this.Type = type;\r\n    this.Intensity = intensity;\r\n    this.id = id++;\r\n}\r\nSceneGuideRecord.FromString = function (content) {\r\n    var v = new SceneGuideRecord(\"00:00:00.000\", \"00:00:00.000\", SceneIntensity.Low, SceneType.Violence);\r\n    v.fromString(content);\r\n    return v;\r\n}\r\nSceneGuideRecord.prototype.toString = function () {\r\n    var str = \"\";\r\n    str += this.From + '\\n' + this.To + '\\n' + this.Type + '\\n' + this.Intensity + '\\n';\r\n    return str;\r\n}\r\nSceneGuideRecord.prototype.fromString = function (lines) {\r\n    for (var i = 0; i < Math.min(lines.length, 4); i++) {\r\n        if (i === 0)\r\n            this.From = lines[i];\r\n        else if (i === 1)\r\n            this.To = lines[i];\r\n        else if (i === 2) {\r\n            this.Type = SceneType.FromString(lines[i]);\r\n        }\r\n        else if (i === 3) {\r\n            this.Intensity = SceneIntensity.FromString(lines[i]);\r\n        }\r\n    }\r\n}\r\n\r\nSceneGuideRecord.ContainTime = function (record, time) {\r\n    var fromArray = record.From.split(\":\");\r\n    var toArray = record.To.split(\":\");\r\n\r\n    var fromTime = Number(fromArray[0]) * 60 * 60 + Number(fromArray[1]) * 60 + Number(fromArray[2]);\r\n    var toTime = Number(toArray[0]) * 60 * 60 + Number(toArray[1]) * 60 + Number(toArray[2]);\r\n\r\n    if (fromTime >= toTime)\r\n        return false;\r\n\r\n    if (time >= fromTime && time <= toTime)\r\n        return true;\r\n    return false;\r\n}\r\n\r\nSceneGuideRecord.prototype.containTime = function (time) {\r\n    var fromArray = this.From.split(\":\");\r\n    var toArray = this.To.split(\":\");\r\n\r\n    var fromTime = Number(fromArray[0]) * 60 * 60 + Number(fromArray[1]) * 60 + Number(fromArray[2]);\r\n    var toTime = Number(toArray[0]) * 60 * 60 + Number(toArray[1]) * 60 + Number(toArray[2]);\r\n\r\n    if (fromTime >= toTime)\r\n        return false;\r\n\r\n    if (time >= fromTime && time <= toTime)\r\n        return true;\r\n    return false;\r\n}\r\n\r\nSceneGuideRecord.prototype.setFromTime = function (time) {\r\n    var hour = Math.floor(time / (60*60));\r\n    var min = Math.floor((time / (60)) % 60);\r\n    var sec = ((time) % 60).toFixed(2);\r\n\r\n    this.From = `${hour}:${min}:${sec}`;\r\n    this.id = id++;\r\n}\r\n\r\nSceneGuideRecord.prototype.setToTime = function (time) {\r\n    var hour = Math.floor(time / (60*60));\r\n    var min = Math.floor((time / (60)) % 60);\r\n    var sec = ((time) % 60).toFixed(2);\r\n\r\n    this.To = `${hour}:${min}:${sec}`;\r\n    this.id = id++;\r\n}\r\n\r\nSceneGuideRecord.prototype.endTime = function () {\r\n    var toArray = this.To.split(\":\");\r\n    var toTime = Number(toArray[0]) * 60 * 60 + Number(toArray[1]) * 60 + Number(toArray[2]);\r\n    return toTime;\r\n}\r\n\r\n/**************************************************************\r\n ******************* SceneGuideClass Class *******************\r\n **************************************************************/\r\nclass SceneGuideClass\r\n{\r\n    static async ReadFile(url) {\r\n        const response = await fetch(url);\r\n        const data = await response.text();\r\n        return SceneGuideClass.FromString(data);\r\n      }\r\n    \r\n    static FromString = function (content) {\r\n        const records = [];\r\n        content = content.replaceAll('\\r','')\r\n        var lines = content.split('\\n');\r\n        for (var i = 0; i < lines.length; i += 5) {\r\n            var array = lines.slice(i, i + 4);\r\n            if (array.length < 4) break;\r\n            records.push(SceneGuideRecord.FromString(array));\r\n        }\r\n        return records;\r\n    }\r\n    \r\n    static ToString = function (records) {\r\n        var str = \"\";\r\n        for (var i = 0; i < records.length; i++) {\r\n            var record = records[i];\r\n            str += record.toString() + \"\\n\";\r\n        }\r\n        return str;\r\n    }\r\n    \r\n    static GetRecordsAtTime = function (records, time) {\r\n        //FIXME save data in order, then binary search\r\n        var ret = [];\r\n        for (var i = 0; i < records.length; i++) {\r\n            var record = records[i];\r\n            if (SceneGuideRecord.ContainTime(record, time))\r\n                ret.push(record);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\nexport { SceneGuideClass, SceneGuideRecord, SceneIntensity, SceneType };","import store from './store'\r\nimport SrtClass from '../common/SrtClass'\r\nimport { SceneGuideClass } from '../common/SceneGuide'\r\n\r\nexport const selectRecords = (state) => {\r\n    return state.sceneFilter.records;\r\n}\r\n\r\nexport const selectSubtitle = (state) => {\r\n    return state.media.subtitle;\r\n}\r\n\r\nexport const selectVideoSrc = (state) => {\r\n    return state.media.videoSrc;\r\n}\r\n\r\nexport const selectVideoName = (state) => {\r\n    return state.media.videoName;\r\n}\r\n\r\nexport const selectTime = (state) => {\r\n    return state.media.time;\r\n}\r\n\r\nexport const selectDuration = (state) => {\r\n    return state.media.duration;\r\n}\r\n\r\nexport const selectPlayerConfig = (state) => {\r\n    return state.media.playerConfig;\r\n}\r\n\r\nexport const selectVolume = (state) => {\r\n    return state.media.volume;\r\n}\r\n\r\nexport const selectMute = (state) => {\r\n    return state.media.mute;\r\n}\r\n\r\nexport const selectSpeed = (state) => {\r\n    return state.media.speed;\r\n}\r\n\r\nexport const selectPlayerState = (state) => {\r\n    return state.media.playerState;\r\n}\r\n\r\nexport const selectModalOpen = (state) => {\r\n    return state.settings.modalOpen;\r\n}\r\n\r\nexport const selectVideoIsLoading = (state) => {\r\n    return state.media.videoIsLoading;\r\n}\r\n\r\n//Settings\r\nexport const getFontConfig = (state) => {\r\n    return state.settings.fontConfig;\r\n}\r\n\r\n//HELPERS\r\nexport const getSubtitleAtTime = (time) => {\r\n    const subtitle = selectSubtitle(store.getState());\r\n    return SrtClass.GetContentAt(subtitle, time);\r\n}\r\n\r\nexport const getRecordsAtTime = (time) => {\r\n    const records = selectRecords(store.getState());\r\n    return SceneGuideClass.GetRecordsAtTime(records, time);\r\n}\r\n","import {\r\n  SET_SUBTITLE,\r\n  VIDEO_SRC,\r\n  VIDEO_IS_LOADING,\r\n  VIDEO_SRC_NAME,\r\n  SET_TIME,\r\n  SET_DURATION,\r\n  SET_VOLUME,\r\n  SET_MUTE,\r\n  SET_SPEED,\r\n  ADD_ITEMS,\r\n  SET_ITEMS,\r\n  REMOVE_ITEM_INDEX,\r\n  REMOVE_ALL,\r\n  UPDATE_ITEM,\r\n  SET_PLAYER_STATE,\r\n  SET_PLAYER_CONFIG,\r\n  SET_FONT_CONFIG,\r\n  SET_MODAL_OPEN\r\n} from \"./actionTypes\";\r\n\r\nexport const setSubtitle = subtitle => ({\r\n  type: SET_SUBTITLE,\r\n  payload: {\r\n    subtitle\r\n  }\r\n});\r\n\r\nexport const setVideoSrc = videoSrc => ({\r\n  type: VIDEO_SRC,\r\n  payload: { videoSrc }\r\n});\r\n\r\nexport const setVideoName = videoName => ({\r\n  type: VIDEO_SRC_NAME,\r\n  payload: { videoName }\r\n});\r\n\r\nexport const setTime = (time) => {\r\n  return {\r\n    type: SET_TIME,\r\n    payload: { time }\r\n  };\r\n}\r\nexport const setDuration = (duration) => {\r\n  return {\r\n    type: SET_DURATION,\r\n    payload: { duration }\r\n  }\r\n};\r\nexport const setVolume = (volume) => {\r\n  return {\r\n    type: SET_VOLUME,\r\n    payload: { volume }\r\n  }\r\n};\r\nexport const setMute = (mute) => {\r\n  return {\r\n    type: SET_MUTE,\r\n    payload: { mute }\r\n  }\r\n};\r\nexport const setSpeed = (speed) => {\r\n  return {\r\n    type: SET_SPEED,\r\n    payload: { speed }\r\n  }\r\n};\r\nexport const setPlayerState = (playerState) => {\r\n  return {\r\n    type: SET_PLAYER_STATE,\r\n    payload: { playerState }\r\n  }\r\n};\r\n\r\nexport const setPlayerConfig = (playerConfig) => {\r\n  return {\r\n    type: SET_PLAYER_CONFIG,\r\n    payload: { playerConfig }\r\n  }\r\n};\r\n\r\nexport const setModalOpen = (modalOpen) => {\r\n  return {\r\n    type: SET_MODAL_OPEN,\r\n    payload: { modalOpen }\r\n  }\r\n};\r\n\r\nexport const setVideoIsLoading = (videoIsLoading) => {\r\n  return {\r\n    type: VIDEO_IS_LOADING,\r\n    payload: { videoIsLoading }\r\n  }\r\n};\r\n\r\nexport const addFilterItems = records => ({\r\n  type: ADD_ITEMS,\r\n  payload: { records }\r\n});\r\n\r\nexport const setFilterItems = records => ({\r\n  type: SET_ITEMS,\r\n  payload: { records }\r\n});\r\n\r\nexport const removeFilterIndex = index => ({\r\n  type: REMOVE_ITEM_INDEX,\r\n  payload: { index }\r\n});\r\n\r\nexport const removeAllFilters = () => ({\r\n  type: REMOVE_ALL,\r\n  payload: {}\r\n});\r\n\r\nexport const updateFilterItem = (record, index) => ({\r\n  type: UPDATE_ITEM,\r\n  payload: { record, index }\r\n});\r\n\r\nexport const setSettings_fontConfig = (fontConfig) => ({\r\n  type: SET_FONT_CONFIG,\r\n  payload: { fontConfig }\r\n});","import Slider from './Slider'\r\nexport default Slider;","import React, { Fragment, useRef } from 'react'\r\nimport { FaVolumeMute, FaVolumeUp } from 'react-icons/fa';\r\nimport './style.css'\r\n\r\nexport default function Slider({ value, setValue, mute }) {\r\n    const ref = useRef(null);\r\n    return (\r\n        <div>\r\n            <span className='slider-text' >{Math.floor(value)}</span>\r\n            <div ref={ref} className='slider-container' onClick={\r\n                (e) => {\r\n                    e.stopPropagation();\r\n                    var rect = ref.current.getBoundingClientRect();\r\n                    var y = e.clientY - rect.top;\r\n                    setValue((rect.height - y) / rect.height)\r\n                }\r\n            }>\r\n                <div className='slider-value'\r\n                    style={{\r\n                        position: 'absolute',\r\n                        width: '100%',\r\n                        height: `${Math.floor(value)}%`,\r\n                        background: 'rgba(127,127,127,0.5)',\r\n                        bottom: '0px'\r\n                    }}></div>\r\n            </div>\r\n            {mute ? <FaVolumeMute style={{color:'white', marginTop:'5px'}}/>: <FaVolumeUp style={{color:'white', marginTop:'5px'}}/>}\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useRef, useState } from 'react'\r\n\r\nimport { MdForward5 } from 'react-icons/md'\r\nimport { MdForward10 } from 'react-icons/md'\r\nimport { MdForward30 } from 'react-icons/md'\r\n\r\nimport { MdReplay5 } from 'react-icons/md'\r\nimport { MdReplay10 } from 'react-icons/md'\r\nimport { MdReplay30 } from 'react-icons/md'\r\n\r\nimport { GiExpand } from 'react-icons/gi'\r\nimport { MdPlayArrow, MdPause } from 'react-icons/md'\r\n\r\nimport './style.css'\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { selectTime, selectDuration, selectPlayerState, selectVolume, selectMute, selectModalOpen, selectVideoName } from '../../redux/selectors';\r\nimport { setTime, setPlayerState, setVolume } from '../../redux/actions';\r\nimport { Fragment } from 'react';\r\nimport Slider from '../Slider';\r\nimport { Component } from 'react';\r\n\r\nvar styleControls = {\r\n    width: '80%',\r\n    zIndex: 99,\r\n    opacity: 1,\r\n    transition: 'opacity 3s',\r\n    position: 'absolute',\r\n    left: '10%',\r\n    height: '100%',\r\n}\r\n\r\nvar seekbarStyle = {\r\n    margin: '0 auto',\r\n    width: '100%',\r\n    height: '5px',\r\n    background: 'gray',\r\n    position: 'absolute',\r\n    bottom: '50px',\r\n}\r\n\r\nvar seekbarStyleProgress = {\r\n    width: '100%',\r\n    height: '5px',\r\n    background: 'white',\r\n}\r\n\r\nvar seekhandleStyle = {\r\n    left: '100%',\r\n    top: '-10px',\r\n    marginLeft: '-12px',\r\n    width: '24px',\r\n    height: '24px',\r\n    background: 'white',\r\n    position: 'relative',\r\n    borderRadius: '50%',\r\n    border: '1px solid black',\r\n    opacity: 1.0\r\n}\r\n\r\nvar seekbuttonStyle = {\r\n    width: '32px',\r\n    height: '32px',\r\n    marginTop: '16px'\r\n}\r\n\r\nconst KEY = {\r\n    SPACE: 32,\r\n    SPACE_ANDROID_V_KB: 231,//get by debugging\r\n    LEFT: 37,\r\n    RIGHT: 39,\r\n    F: 70,\r\n\r\n    MEDIA_PLAY_PAUSE:   179,\r\n    FAST_FORWARD:       417,\r\n    REWIND:             412,\r\n};\r\n\r\nlet PlayIcon = MdPlayArrow;\r\n\r\nfunction VideoControls({ time,\r\n    setTime,\r\n    duration,\r\n    visible,\r\n    playerState,\r\n    setPlayerState,\r\n    setVolume,\r\n    volume,\r\n    isMute,\r\n    onFullscreen,\r\n    videoName,\r\n    modalOpen\r\n}) {\r\n\r\n    const ref = useRef(null);\r\n    const seekbutton = useRef(null);\r\n    const seekbar = useRef(null);\r\n    const timeLabel = useRef(null);\r\n    let style;\r\n    if (visible)\r\n        style = { ...styleControls, opacity: 1};\r\n    else\r\n        style = { ...styleControls, opacity: 0 };\r\n\r\n    const [styleHandle, setStyleHandle] = useState(seekhandleStyle);\r\n    const [styleButton, setStyleButton] = useState(seekbuttonStyle);\r\n    const [styleProgress] = useState(seekbarStyleProgress);\r\n    const [progress, setProgress] = useState(0);\r\n    const [keyEvent, setKeyEvent] = useState(null);\r\n\r\n    const timeToString = (time) => {\r\n        let h = Math.floor(time / (60 * 60) % 24);\r\n        let m = Math.floor(time / (60) % 60);\r\n        let s = Math.floor(time % 60);\r\n        if (h < 10) h = '0' + h;\r\n        if (m < 10) m = '0' + m;\r\n        if (s < 10) s = '0' + s;\r\n        return h + ':' + m + ':' + s\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (duration > 0) {\r\n            setProgress(Math.floor(time / duration * 100) / 100);\r\n        }\r\n        timeLabel.current.innerHTML = timeToString(time) + ' / ' + timeToString(duration);\r\n    }, [time, duration]);\r\n\r\n    useEffect(() => {\r\n        if(modalOpen || !keyEvent) return;\r\n        let jump = keyEvent.shiftKey ? 1 : 5;\r\n            if (keyEvent.ctrlKey) jump*=2;\r\n            if (keyEvent.altKey) jump/=2;\r\n\r\n            switch (keyEvent.keyCode) {\r\n                case KEY.SPACE:\r\n                case KEY.SPACE_ANDROID_V_KB:\r\n                case KEY.MEDIA_PLAY_PAUSE:\r\n                    onPlayClick()\r\n                    break;\r\n                case KEY.LEFT:\r\n                case KEY.REWIND:\r\n                    setTime(time - jump)\r\n                    break;\r\n                case KEY.RIGHT:\r\n                case KEY.FAST_FORWARD:\r\n                    setTime(time + jump)\r\n                    break;\r\n                case KEY.F:\r\n                    onFullscreen()\r\n                    break;\r\n            }\r\n    }, [keyEvent]);\r\n\r\n    useEffect(() => {\r\n        \r\n        const handleKeyDown = (e) => {\r\n            setKeyEvent(e);\r\n        }\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        }\r\n    }, []);\r\n\r\n    const mouseMove = (e) => {\r\n        updateSeek(e.clientX);\r\n    }\r\n\r\n    const mousein = (str) => {\r\n        if (str === \"Handle\")\r\n            setStyleHandle({ ...styleHandle, cursor: 'pointer' });\r\n        else if (str === \"Button\")\r\n            setStyleButton({ ...styleButton, cursor: 'pointer' });\r\n    }\r\n\r\n    const mouseout = (str) => {\r\n        if (str === \"Handle\")\r\n            setStyleHandle({ ...styleHandle, cursor: 'arrow' });\r\n        else if (str === \"Button\")\r\n            setStyleButton({ ...styleButton, cursor: 'arrow' });\r\n    }\r\n\r\n    const updateSeek = (x) => {\r\n        var rect = seekbar.current.getBoundingClientRect();\r\n        let progress = (x - rect.left) / rect.width;\r\n        if (progress >= 1.0) progress = 1.0;\r\n        if (progress < 0.0) progress = 0.0;\r\n        setTime(progress * duration);\r\n    }\r\n\r\n    const mousedown = (e) => {\r\n        updateSeek(e.clientX);\r\n        e.stopPropagation();\r\n    }\r\n\r\n    const cleanDocEvents = () => {\r\n        document.onpointermove = null;\r\n        document.onpointerup = null;\r\n    }\r\n\r\n    useEffect(()=>{\r\n        if (playerState === 'play') {\r\n            PlayIcon = (MdPause);\r\n        }\r\n        else {\r\n            PlayIcon = (MdPlayArrow);\r\n        }\r\n    },[playerState])\r\n\r\n    const onPlayClick = (event) => {\r\n        if (videoName) {\r\n            if (playerState === 'play') {\r\n                setPlayerState('pause');\r\n            }\r\n            else {\r\n                setPlayerState('play');\r\n            }\r\n        }\r\n    }\r\n\r\n    const player_controls = (\r\n        <div className='main-controls'>\r\n            {/* <MdReplay30 className='controls left' onClick={()=>{setTime(time-30)}} /> */}\r\n            <MdReplay10 className='controls left' onClick={(event)=>{setTime(time-10); event.stopPropagation();}} />\r\n            <MdReplay5 className='controls left' onClick={(event) => { setTime(time - 5); event.stopPropagation(); }} />\r\n            <PlayIcon\r\n                id=\"btn_play\"\r\n                // src={\r\n                //     (playerState === 'pause') ?\r\n                //         playicon : pauseicon\r\n                // }\r\n                alt='error'\r\n                style={{...styleButton, color:'white'}}\r\n                onClick={onPlayClick}\r\n                onPointerEnter={(e) => {\r\n                    mousein(\"Button\");\r\n                    e.stopPropagation();\r\n                }}\r\n                onPointerLeave={(e) => {\r\n                    mouseout(\"Button\");\r\n                    e.stopPropagation();\r\n                }}\r\n            />\r\n            <MdForward5 className='controls right' onClick={(event) => { setTime(time + 5); event.stopPropagation(); }} />\r\n            <MdForward10 className='controls right' onClick={(event)=>{setTime(time+10);  event.stopPropagation();}} />\r\n            {/* <MdForward30 className='controls right' onClick={()=>{setTime(time+30)}} /> */}\r\n        </div>\r\n    );\r\n    return (\r\n        <div style={style} ref={ref}>\r\n            <div style={seekbarStyle} ref={seekbar} onPointerDown={mousedown} onPointerUp={cleanDocEvents} onClick={e=>e.stopPropagation()}>\r\n                <div style={{ ...styleProgress, width: (progress * 100) + '%' }}>\r\n                    <div style={styleHandle}\r\n                        ref={seekbutton}\r\n                        onPointerEnter={() => { mousein(\"Handle\") }}\r\n                        onPointerLeave={() => { mouseout(\"Handle\") }}\r\n                        onPointerDown={(e) => {\r\n                            document.onpointermove = mouseMove;\r\n                            document.onpointerup = cleanDocEvents;\r\n                            document.onclick = e => e.stopPropagation()\r\n                            e.stopPropagation();\r\n                        }}\r\n                        onClick={(e)=>{\r\n                            e.stopPropagation();\r\n                        }}\r\n                    />\r\n                </div>\r\n            </div>\r\n            <p ref={timeLabel} className='controltime' />\r\n            {player_controls}\r\n            <GiExpand\r\n                id=\"full-screen\"\r\n                alt='error'\r\n                style={{\r\n                    ...styleButton,\r\n                    bottom: '10px',\r\n                    position: 'absolute',\r\n                    right: '0',\r\n                    color:'white',\r\n                    paintOrder: 'stroke fill',\r\n                    strokeWidth: '20px',\r\n                    stroke: 'black'\r\n                }}\r\n                onClick={(e) => {\r\n                    onFullscreen();\r\n                    e.stopPropagation();\r\n                }}\r\n                onPointerEnter={() => { mousein(\"Button\") }}\r\n                onPointerLeave={() => { mouseout(\"Button\") }}\r\n                />\r\n                <div className='controls-volume'>\r\n                <Slider\r\n                    value={volume * 100}\r\n                    mute={isMute}\r\n                    setValue={\r\n                        (v) => {\r\n                            setVolume(v);\r\n                        }\r\n                    } />\r\n                </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        time: selectTime(state),\r\n        duration: selectDuration(state),\r\n        playerState: selectPlayerState(state),\r\n        volume: selectVolume(state),\r\n        isMute: selectMute(state),\r\n        modalOpen: selectModalOpen(state),\r\n        videoName: selectVideoName(state),\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setTime, setPlayerState, setPlayerState, setVolume })(VideoControls);","import React, { useEffect, useState } from \"react\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { selectTime, selectRecords, getRecordsAtTime, selectPlayerConfig } from '../../redux/selectors';\r\nimport { setMute, setTime, setSpeed } from \"../../redux/actions\";\r\nimport { PLAYER_ACTION } from '../../redux/actionTypes';\r\n\r\n\r\nconst FilterStyle = {\r\n    pointerEvents: \"none\",\r\n    position: \"absolute\",\r\n    left: 0,\r\n    top: 0,\r\n    width: \"100%\",\r\n    height: \"100%\",\r\n    zIndex: 2,\r\n};\r\n\r\nfunction VideoFilter({\r\n    records,\r\n    time,\r\n    setMute,\r\n    setTime,\r\n    setSpeed,\r\n    playerConfig,\r\n    blackScreen\r\n}) {\r\n    const [style, setStyle] = useState(FilterStyle);\r\n\r\n    useEffect(() => {\r\n        if (blackScreen) {\r\n            setStyle({ ...FilterStyle, background: \"black\" });\r\n            return;\r\n        }\r\n        if (!records || !records.length) return;\r\n\r\n        var currentRecords = getRecordsAtTime(time);\r\n        var mute = false;\r\n        var skip = false;\r\n        var black = false;\r\n        var blur = false;\r\n        var blurExtra = false;\r\n        var blurExtreme = false;\r\n        var doubleSpeed = false;\r\n        var skipRecord = null;\r\n\r\n        for (var i = 0; i < currentRecords.length; i++) {\r\n            var record = currentRecords[i];\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.MUTE || playerConfig[record.Type][1] === PLAYER_ACTION.MUTE) {\r\n                mute = true;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.SKIP || playerConfig[record.Type][1] === PLAYER_ACTION.SKIP) {\r\n                skip = true;\r\n                skipRecord = record;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.BLACK || playerConfig[record.Type][1] === PLAYER_ACTION.BLACK) {\r\n                black = true;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.BLUR || playerConfig[record.Type][1] === PLAYER_ACTION.BLUR) {\r\n                blur = true;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.BLUR_EXTRA || playerConfig[record.Type][1] === PLAYER_ACTION.BLUR_EXTRA) {\r\n                blurExtra = true;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.BLUR_EXTREME || playerConfig[record.Type][1] === PLAYER_ACTION.BLUR_EXTREME) {\r\n                blurExtreme = true;\r\n            }\r\n            if (playerConfig[record.Type][0] === PLAYER_ACTION.BLUR_EXTREME_X2 || playerConfig[record.Type][1] === PLAYER_ACTION.BLUR_EXTREME_X2) {\r\n                blurExtreme = true;\r\n                doubleSpeed = true;\r\n            }\r\n        }\r\n\r\n        setMute(mute);\r\n\r\n        if (skip) {\r\n            setTime(skipRecord.endTime() + 0.01);\r\n            return;\r\n        }\r\n\r\n        if (blur || black || blurExtra || blurExtreme) {\r\n            if (blur)\r\n                setStyle({ ...FilterStyle, backdropFilter: \"blur(15px)\" });\r\n            else if (blurExtra)\r\n                setStyle({ ...FilterStyle, backdropFilter: \"blur(45px)\" });\r\n            else if (blurExtreme)\r\n                setStyle({ ...FilterStyle, backdropFilter: \"blur(80px)\" });\r\n            else\r\n                setStyle({ ...FilterStyle, background: \"black\" });\r\n        }\r\n        else {\r\n            setStyle({ ...FilterStyle });\r\n        }\r\n\r\n        if (doubleSpeed) {\r\n            setSpeed(2.0);\r\n        } else {\r\n            setSpeed(1.0);\r\n        }\r\n\r\n    }, [time, records, playerConfig, blackScreen]);\r\n\r\n    return <div style={style}></div>;\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    const records = selectRecords(state);\r\n    const time = selectTime(state);\r\n    const playerConfig = selectPlayerConfig(state);\r\n    return { records, time, playerConfig };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setMute, setTime, setSpeed })(VideoFilter);","import React from 'react'\r\nimport parser from  'html-react-parser'\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { selectTime, selectSubtitle, getSubtitleAtTime, getFontConfig } from '../../redux/selectors';\r\n\r\nlet style = {\r\n    color: 'white',\r\n    fontSize: '20pt',\r\n    backgroundColor: 'rgba(0,0,0,0.7)',\r\n};\r\n\r\nfunction VideoSRT({ subtitle, time, fontSize, fontTransparency }) {\r\n\r\n    style = {\r\n        ...style,\r\n        backgroundColor: 'rgba(0,0,0,'+ fontTransparency +')',\r\n        fontSize : fontSize + 'px'};\r\n\r\n    return (\r\n        <div style={style}>\r\n            {parser(getSubtitleAtTime(time).join('\\n'))}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    const subtitle = selectSubtitle(state);\r\n    const time = selectTime(state);\r\n    const fontSize = getFontConfig(state).size;\r\n    const fontTransparency = getFontConfig(state).transparency;\r\n    return { subtitle, time, fontSize, fontTransparency };\r\n  };\r\n\r\nexport default connect(mapStateToProps)(VideoSRT);","import React, {createRef} from \"react\";\r\nimport VideoControls from \"./VideoControls\";\r\nimport VideoFilter from \"./VideoFilter\";\r\nimport VideoSrt from \"./VideoSRT\";\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { selectVideoSrc, selectTime, selectVolume, selectMute, selectPlayerState, selectSpeed, selectVideoName, selectVideoIsLoading } from '../../redux/selectors'\r\nimport { setTime, setDuration, setPlayerState, setVideoIsLoading, setVolume } from \"../../redux/actions\";\r\n\r\nconst debounce = (func1, func, delay) => {\r\n  let inDebounce;\r\n  return function () {\r\n    const context = this;\r\n    const args = arguments;\r\n    clearTimeout(inDebounce);\r\n    func1();\r\n    inDebounce = setTimeout(() => func.apply(context, args), delay);\r\n  };\r\n};\r\n\r\nclass VideoPlayer extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      time: 0,\r\n      duration: 0,\r\n      visible: true,\r\n      blackScreen: false,\r\n    };\r\n    this.player = createRef();\r\n    this.control = createRef();\r\n    this.hideTimer = null;\r\n    this.localStorageUpdateCounter = 0;\r\n    this.clickCount = 0;\r\n    this.timer = null;\r\n  }\r\n\r\n  componentDidMount(){\r\n    this.progressSave = setInterval(() => {\r\n      const {time, videoName, isLoading} = this.props;\r\n      if (videoName && time && !isLoading)\r\n        localStorage.setItem(videoName, time);\r\n    }, 5000);\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    if(this.timer){\r\n      clearTimeout(this.timer);\r\n      this.timer = null;\r\n    }\r\n    if(this.progressSave){\r\n      clearInterval(this.progressSave);\r\n      this.progressSave = null;\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { time, playerState, volume, mute, speed } = this.props;\r\n\r\n    if (this.props.videoSrc !== prevProps.videoSrc) {\r\n      this.setState({\r\n        time,\r\n        visible: true,\r\n        blackScreen: false,\r\n      });\r\n    }\r\n    if (Math.abs(time - this.player.current.currentTime) > 0.5){\r\n      this.player.current.currentTime = time;\r\n    }\r\n    if (mute || Math.abs(volume - this.player.current.volume) > 0.01){\r\n      if (mute) {\r\n        this.player.current.volume = 0;\r\n      }\r\n      else {\r\n        this.player.current.volume = volume;\r\n      }\r\n    }\r\n    if ((playerState === 'play') && this.player.current.paused){\r\n      this.player.current.play();\r\n      this.setState({blackScreen: false});\r\n      clearTimeout(this.hideTimer);\r\n      this.hideTimer = setTimeout(() => {\r\n        this.setState({ visible: false });\r\n        this.hideTimer = null;\r\n      }, 1000);\r\n    }\r\n    else if ((playerState === 'pause') && !this.player.current.paused){\r\n      this.player.current.pause();\r\n      if(this.hideTimer)\r\n      {\r\n        clearTimeout(this.hideTimer);\r\n        this.hideTimer = null;\r\n      }\r\n      this.setState({ visible: true });\r\n    }\r\n    if(this.player.current.playbackRate != speed){\r\n      this.player.current.playbackRate = speed;\r\n    }\r\n  }\r\n\r\n  onFullscreen = () => {\r\n    if (document.fullscreenElement) {\r\n      document.exitFullscreen();\r\n    } else {\r\n      this.player.current.parentElement.requestFullscreen();\r\n    }\r\n  };\r\n\r\n  render = () => {\r\n    const { videoSrc, setTime, setDuration, videoName, setPlayerState, setVideoIsLoading, playerState, setVolume, volume} = this.props;\r\n    const {time, duration, visible, blackScreen} = this.state;\r\n    return (\r\n      <div className={`playercontainer ${visible ? '' : 'hidden'}`}\r\n        onPointerMove={debounce(\r\n          () => {\r\n            this.setState({visible: true});\r\n          },\r\n          () => {\r\n            if (this.player.current) {\r\n              clearTimeout(this.hideTimer);\r\n              this.hideTimer = setTimeout(() => {\r\n                this.setState({visible: this.player.current.paused});\r\n                this.hideTimer = null;\r\n              }, 1000);\r\n            }\r\n          },\r\n          2000\r\n        )}\r\n        onClick={() => {\r\n          this.clickCount++;\r\n          if (this.clickCount === 1) {\r\n            this.timer = setTimeout(() => {\r\n              this.clickCount = 0;\r\n              this.timer = null;\r\n              if (videoName) {\r\n                if (playerState == 'play') {\r\n                  setPlayerState('pause');\r\n                } else {\r\n                  setPlayerState('play');\r\n                }\r\n              }\r\n            }, 250);\r\n          } else {\r\n            clearTimeout(this.timer);\r\n            this.clickCount = 0;\r\n            this.timer = null;\r\n            this.onFullscreen();\r\n          }\r\n        }}\r\n        onWheel={(event)=>{\r\n          event.stopPropagation();\r\n          setVolume(volume + event.deltaY * -0.0005);\r\n        }}\r\n        onPointerDown={(e)=>{\r\n          if(e.button == 1){\r\n            this.setState({ blackScreen: !blackScreen }, () => {\r\n              setPlayerState('pause');\r\n            });\r\n          }\r\n        }}\r\n      >\r\n        <video\r\n          className={`player ${videoSrc ? '' : 'no-source'}`}\r\n          src={videoSrc}\r\n          ref={this.player}\r\n          onLoadedData={(event)=>{\r\n            setVideoIsLoading(false);\r\n            const getCurrentTime = localStorage.getItem(videoName) || 0;\r\n            setTime(Number(getCurrentTime));\r\n            setDuration(event.target.duration);\r\n            setPlayerState(\"pause\");\r\n          }}\r\n          onSeeking={(event) => {\r\n            const { currentTime } = this.player.current;\r\n            setTime(currentTime);\r\n          }}\r\n          onSeeked={(event) => {\r\n            const { currentTime } = this.player.current;\r\n            setTime(currentTime);\r\n          }}\r\n          onTimeUpdate={(event) => {\r\n            setTime(event.target.currentTime);\r\n          }}\r\n        ></video>\r\n        <VideoFilter blackScreen={blackScreen}/>\r\n        <div\r\n          style={{\r\n            display: \"grid\",\r\n            position: \"absolute\",\r\n            gridTemplateRows: \"60% 20% 20%\",\r\n            top: \"0%\",\r\n            left: 0,\r\n            width: \"100%\",\r\n            height: \"100%\",\r\n            zIndex: 3,\r\n          }}\r\n        >\r\n          <div className='subtitlecontainer'>\r\n            {<VideoSrt time={time * 1000} />}\r\n          </div>\r\n          <div className='controlscontainer'>\r\n            <VideoControls\r\n              ref={this.control}\r\n              style={{ width: \"80%\" }}\r\n              playAction={this.playAction}\r\n              currentTime={time}\r\n              duration={duration}\r\n              visible={visible}\r\n              onFullscreen={this.onFullscreen}\r\n              state={playerState}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    videoSrc: selectVideoSrc(state),\r\n    time: selectTime(state),\r\n    volume: selectVolume(state),\r\n    mute: selectMute(state),\r\n    playerState: selectPlayerState(state),\r\n    speed: selectSpeed(state),\r\n    videoName: selectVideoName(state),\r\n    isLoading: selectVideoIsLoading(state),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setDuration, setTime, setPlayerState, setVolume, setVideoIsLoading })(VideoPlayer);\r\n","import About from './About'\r\nexport default About;","import React from 'react'\r\nimport './style.css'\r\n\r\nexport default function About({close}) {\r\n    return (\r\n        <div className='overlay'>\r\n            <div className='box'>\r\n                <h1> Guided Scene Player/Editor </h1>\r\n                <p> Creator : Ali M Alzyod </p>\r\n                <p> ali198724@gmail.com </p>\r\n                <p>\r\n                <a className='box-links' href='https://github.com/Ali-Alzyoud/ScenesControl'> https://github.com/Ali-Alzyoud/ScenesControl </a>\r\n                </p>\r\n                <p> App Version : (2022) 0.1v </p>\r\n                <br/>\r\n                <p className=\"bold\"> Key Bindings Editing </p>\r\n                <div className='part'>\r\n                    e : open Editor <br/>\r\n                    c : open configure\r\n                </div>\r\n                <div className='part'>\r\n                    [ : from time <br/>\r\n                    ] : to time\r\n                </div>\r\n                <div className='part'>\r\n                    n : new record <br/>\r\n                    s : select record\r\n                </div>\r\n                <div className='part'>\r\n                    Ctrl + s : Save Filter File\r\n                </div>\r\n\r\n                <br/>\r\n                <p className=\"bold\"> Key Bindings Playing</p>\r\n                <div className='part center'>\r\n                    Space/Play : play/pause <br/>\r\n                    F : FullScreen\r\n                </div>\r\n                <p className=\"bold\"> Mouse Bindings </p>\r\n                <div className='part'>\r\n                    Left-Click : Play/Pause <br/>\r\n                    Left-Double Click : FullScreen on/off <br/>\r\n                    Middle : Back Screen on/off <br/>\r\n                </div>\r\n                <br/>\r\n                <br/>\r\n                <br/>\r\n                <button className='button' onClick={close}>Ok</button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport { connect } from \"react-redux\";\r\nimport { getFontConfig } from '../../redux/selectors';\r\nimport { setSettings_fontConfig } from '../../redux/actions';\r\n\r\nimport './style.css'\r\n\r\nfunction Settings({ close, fontConfig, setSettings_fontConfig }) {\r\n    const incFontSize = () => {\r\n        if (fontConfig.size < 80) {\r\n            setSettings_fontConfig(\r\n                {\r\n                    ...fontConfig,\r\n                    size: fontConfig.size + 10\r\n                }\r\n            );\r\n        }\r\n    }\r\n    const decFontSize = () => {\r\n        if (fontConfig.size > 10) {\r\n            setSettings_fontConfig(\r\n                {\r\n                    ...fontConfig,\r\n                    size: fontConfig.size - 10\r\n                }\r\n            );\r\n        }\r\n    }\r\n    const fontBackground = (value) => {\r\n        const fontConfigClone = {...fontConfig};\r\n        fontConfigClone.transparency = Math.round(10 * (fontConfigClone.transparency + value)) / 10;\r\n        if(fontConfigClone.transparency > 1.0 || fontConfigClone.transparency < 0.0){\r\n            return;\r\n        }\r\n        setSettings_fontConfig(fontConfigClone);\r\n    }\r\n    return (\r\n        <div className='settings-container'>\r\n            <div className='settings-container-box'>\r\n                <div className='settings-container-record'>\r\n                    <span>Font-Size</span>\r\n                    <span>\r\n                        <button onClick={decFontSize}>-</button>\r\n                        <span>{\" \" + fontConfig.size + \" \"}</span>\r\n                        <button onClick={incFontSize}>+</button>\r\n                    </span>\r\n                </div>\r\n                <div className='settings-container-record'>\r\n                    <span>Font-Back</span>\r\n                    <span>\r\n                        <button onClick={() => { fontBackground(-0.1) }}>-</button>\r\n                        <span>{\" \" + fontConfig.transparency.toFixed(1) + \" \"}</span>\r\n                        <button onClick={() => { fontBackground(+0.1) }}>+</button>\r\n                    </span>\r\n                </div>\r\n\r\n                <div className='settings-container-record add-margin'>\r\n                    <button className='button' onClick={close}>Close</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    const fontConfig = getFontConfig(state);\r\n    return { fontConfig };\r\n};\r\n\r\nexport default connect(mapStateToProps, { setSettings_fontConfig })(Settings);","import Settings  from \"./Settings\";\r\nexport default Settings;","import React from 'react'\r\nimport { FiMoreVertical } from 'react-icons/fi'\r\nimport { MdFileDownload } from 'react-icons/md'\r\nimport { GrRadialSelected, GrRadial } from 'react-icons/gr'\r\nimport {MdContentCopy} from 'react-icons/md'\r\n\r\n\r\nexport default function FileRecord({ imgSrc, title, link, index, isSelected, select, copy, readyToPlay }) {\r\n    const click = () => {\r\n        if(link){\r\n            window.open(link);\r\n        }\r\n    }\r\n    return (\r\n        <div className={`file-record ${readyToPlay ? 'ready' : ''}`}>\r\n            <img src={imgSrc} onClick={click} />\r\n            {readyToPlay ?\r\n                <div>\r\n                    <h4 className='title ready'>{'Ready To Play'}</h4><br />\r\n                    <h2 className='title'>{title}</h2>\r\n                </div>\r\n                :\r\n                <h2 className='title'>{title}</h2>\r\n            }\r\n            <div style={{ flex: 2, flexFlow: 'row-reverse', display: 'flex', textAlign: 'end', height: '100%' }}>\r\n                {isSelected ?\r\n                    <GrRadialSelected className='file-record-icon' />\r\n                    :\r\n                    <GrRadial className='file-record-icon' onClick={() => select(index)} />\r\n                }\r\n                <MdContentCopy className='file-record-icon' onClick={() => copy(index)}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","export const endpoint = 'https://raw.githubusercontent.com/Ali-Alzyoud/MediaFilterFiles/main/Media';\r\nconst URLS = {\r\n    RECORDS : endpoint+'/mediaRecords.json'\r\n}\r\n\r\n\r\nexport async function getMediaRecords(){\r\n    const response = await fetch(URLS.RECORDS+`?${Date.now()}`,{\r\n        method: 'GET'\r\n    });\r\n    const status = response.status;\r\n    const result = await response.json();\r\n    return result;\r\n}\r\n","import Loader from './Loader'\r\nexport default Loader;","import React from 'react'\r\nimport { AiOutlineLoading3Quarters } from 'react-icons/ai';\r\nimport './style.css'\r\n\r\nexport default function Loader() {\r\n    return (\r\n        <div className='loader-container'>\r\n            <AiOutlineLoading3Quarters className='loader-icon' />\r\n        </div>\r\n    )\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { MdClose, MdSearch } from 'react-icons/md'\r\nimport FileRecord from './FileRecord'\r\nimport * as API from '../../common/API/API'\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { setFilterItems, setSubtitle, setModalOpen, setVideoSrc, setVideoName, setDuration, setTime } from '../../redux/actions'\r\nimport SrtClass from '../../common/SrtClass'\r\nimport { SceneGuideClass } from '../../common/SceneGuide'\r\n\r\nimport \"./style.css\"\r\nimport Loader from '../Loader';\r\n\r\nfunction FilterPicker({ close, setFilterItems, setSubtitle, setVideoSrc, setVideoName, setModalOpen, setDuration, setTime }) {\r\n    const [recordsItems, setRecordsItems] = useState([]);\r\n    const [selectedIndex, setSelectedIndex] = useState();\r\n    const [filterText, setFilterText] = useState();\r\n    const select = (index) => {\r\n        setSelectedIndex(index);\r\n        const selectedRecord = recordsItems[index];\r\n        const endPointURL = !selectedRecord.isAbsoluteLink ? API.endpoint + \"/\" : '';\r\n        SrtClass.ReadFile(endPointURL + selectedRecord.subtitle).then((records) => {\r\n            setSubtitle(records);\r\n        });\r\n        if (selectedRecord.filterSrc) {\r\n            SceneGuideClass.ReadFile(endPointURL + selectedRecord.filterSrc).then((records) => {\r\n                setFilterItems(records);\r\n            });\r\n        }\r\n        else {\r\n            setFilterItems([]);\r\n        }\r\n        if (selectedRecord.video) {\r\n            setVideoSrc(selectedRecord.video);\r\n            const fileName = selectedRecord.video.replace(/^.*[\\\\\\/]/, '') || 'sample';\r\n            setVideoName(fileName);\r\n            setDuration(0);\r\n        }\r\n        close();\r\n    }\r\n    const copy = (index) => {\r\n        const selectedRecord = recordsItems[index];\r\n        let str = window.location.origin + '#/'\r\n            + btoa(selectedRecord.video) + '/'\r\n            + btoa(selectedRecord.subtitle ? (API.endpoint + \"/\" + selectedRecord.subtitle) : '') + '/'\r\n            + btoa(selectedRecord.filterSrc ? (API.endpoint + \"/\" + selectedRecord.filterSrc): '');\r\n        window.location.href = str;\r\n    }\r\n    const textChanged = (e) => {\r\n        setFilterText(e.target.value.toLowerCase());\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n    }\r\n    useEffect(() => {\r\n        API.getMediaRecords().then((value) => {\r\n            const fileRecords = [];\r\n            setRecordsItems(value.records);\r\n        });\r\n        setModalOpen(true);\r\n        return () => {\r\n            setModalOpen(false);\r\n        }\r\n    }, []);\r\n    return (\r\n        <div className=\"filters-container\">\r\n            <div className=\"filters-container-body\">\r\n                <MdClose className=\"filters-container-close\" onClick={close} />\r\n                <div className='filters-container-input-container'>\r\n                    <input className='filters-container-input' onChange={textChanged}></input>\r\n                </div>\r\n                <MdSearch className=\"filters-container-search\" />\r\n                <div className=\"filter-files\">\r\n                    <list>\r\n                        {\r\n                            recordsItems && recordsItems.length > 0 ?\r\n                                recordsItems.map((item, index) => {\r\n                                    return filterText && !item.title.toLowerCase().includes(filterText) ?\r\n                                        null\r\n                                        :\r\n                                        <FileRecord\r\n                                            imgSrc={item.img}\r\n                                            title={item.title}\r\n                                            link={item.movie}\r\n                                            index={index}\r\n                                            readyToPlay={!!item.video}\r\n                                            isSelected={selectedIndex !== undefined && selectedIndex == index}\r\n                                            select={select}\r\n                                            copy={copy}/>\r\n                                })\r\n                                :\r\n                                <div style={{ width: '100%', position: 'absolute', alignContent: 'center' }}>\r\n                                    <Loader />\r\n                                </div>\r\n                        }\r\n                    </list>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    null,\r\n    { setSubtitle, setFilterItems, setModalOpen, setVideoSrc, setVideoName, setDuration, setTime }\r\n)(FilterPicker);\r\n\r\n","import FilterPicker from './FilterPicker'\r\n\r\nexport default FilterPicker;","import React, { useRef, useState, useEffect } from 'react'\r\nimport SrtClass from '../../common/SrtClass'\r\nimport { SceneGuideClass } from '../../common/SceneGuide'\r\nimport About from '../About'\r\nimport Settings from '../Settings'\r\nimport FilterPicker from '../FilterPicker'\r\n\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { setFilterItems, setVideoSrc, setSubtitle, setVideoName, setTime, setDuration } from '../../redux/actions'\r\n\r\nimport './menu.css'\r\n\r\nfunction Menu({ setFilterItems, setVideoSrc, setVideoName, setSubtitle, setTime, setDuration }) {\r\n    const videoInput = useRef(null);\r\n    const subtitleInput = useRef(null);\r\n    const filterInput = useRef(null);\r\n    const videoInputURL = useRef(null);\r\n    const subtitleInputURL = useRef(null);\r\n    const filterInputURL = useRef(null);\r\n    const [key, setkey] = useState(0);\r\n    const [about, setabout] = useState(false);\r\n    const [settings, setSettings] = useState(false);\r\n    const [filterPicker, setfilterPicker] = useState(false);\r\n    const [files, setFiles] = useState({});\r\n    const openVideoFile = (e) => {\r\n        if (e.target.files.length < 1) return;\r\n\r\n        const videoSrc = URL.createObjectURL(e.target.files[0]);\r\n        const videoName = e.target.files[0].name;\r\n        setVideoSrc(videoSrc);\r\n        setVideoName(videoName);\r\n\r\n        const getCurrentTime = localStorage.getItem(videoName) || 0;\r\n        setDuration(0);\r\n        setTime(Number(getCurrentTime));\r\n        setkey(key + 1);\r\n    }\r\n    const openSubtitleFile = (e) => {\r\n        if (e.target.files.length < 1) return;\r\n        SrtClass.ReadFile(URL.createObjectURL(e.target.files[0])).then((records) => {\r\n            setSubtitle(records);\r\n        });\r\n        setkey(key + 1);\r\n    }\r\n    const openFilterFile = (e) => {\r\n        if (e.target.files.length < 1) return;\r\n        const filterURL = URL.createObjectURL(e.target.files[0]);\r\n        SceneGuideClass.ReadFile(filterURL).then((records) => {\r\n            setFilterItems(records);\r\n        });\r\n        setkey(key + 1);\r\n    }\r\n    useEffect(() => {\r\n        fetch('videos.json').then(res => {\r\n            res.json().then(content => {\r\n                setFiles(content);\r\n            });\r\n        });\r\n    }, [])\r\n    const loadURLS = () => {\r\n        const vidURL = videoInputURL.current.value;\r\n        const subURL = subtitleInputURL.current.value;\r\n        const filURL = filterInputURL.current.value;\r\n\r\n        if (vidURL) {\r\n            setVideoSrc(vidURL);\r\n            setVideoName(\"URL\");\r\n        }\r\n        if (filURL) {\r\n            SceneGuideClass.ReadFile(filURL).then((records) => {\r\n                setFilterItems(records);\r\n            });\r\n        }\r\n        if (subURL) {\r\n            SrtClass.ReadFile(subURL).then((records) => {\r\n                setSubtitle(records);\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"navbar\">\r\n            <div className=\"dropdown\">\r\n                <button className=\"dropbtn\">File\r\n                </button>\r\n                <div className=\"dropdown-content\">\r\n                    <input className='hidden' key={key} ref={videoInput} type='file' onChange={openVideoFile} />\r\n                    <input className='hidden' key={key} ref={subtitleInput} type='file' onChange={openSubtitleFile} />\r\n                    <input className='hidden' key={key} ref={filterInput} type='file' onChange={openFilterFile} />\r\n                    <a href=\"#\" onClick={() => videoInput.current.click()}>Open video</a>\r\n                    <a href=\"#\" onClick={() => subtitleInput.current.click()}>Open subtitle</a>\r\n                    <a href=\"#\" onClick={() => filterInput.current.click()}>Open filter</a>\r\n                </div>\r\n            </div>\r\n            <div className=\"dropdown\">\r\n                <button className=\"dropbtn\">URL\r\n                </button>\r\n                <div className=\"dropdown-content files\">\r\n                    <span>{'Video :'}</span>\r\n                    <input ref={videoInputURL} type='text' />\r\n                    <br />\r\n                    <span>{'Subtitle :'}</span>\r\n                    <input ref={subtitleInputURL} type='text' />\r\n                    <br />\r\n                    <span>{'Filter :'}</span>\r\n                    <input ref={filterInputURL} type='text' />\r\n                    <br />\r\n                    <a href=\"#\" onClick={loadURLS}>LOAD</a>\r\n                </div>\r\n            </div>\r\n            <div className=\"dropdown\">\r\n                <button className=\"dropbtn blue\" onClick={() => { setfilterPicker(true) }}>Store\r\n                </button>\r\n            </div>\r\n            <div className=\"dropdown\">\r\n                <button className=\"dropbtn\" onClick={() => { setSettings(true) }}>Settings\r\n                </button>\r\n            </div>\r\n            <div className=\"dropdown\">\r\n                <button className=\"dropbtn\" onClick={() => { setabout(true) }}>About\r\n                </button>\r\n            </div>\r\n            {about && <About close={() => { setabout(false) }} />}\r\n            {settings && <Settings close={() => { setSettings(false) }} />}\r\n            {filterPicker && <FilterPicker close={() => { setfilterPicker(false) }} />}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default connect(\r\n    null,\r\n    { setVideoSrc, setVideoName, setSubtitle, setFilterItems, setTime, setDuration }\r\n)(Menu);\r\n","import Menu from './Menu'\r\n\r\nexport default Menu;","import React, { useState } from 'react'\r\nimport { SceneIntensity, SceneType } from '../../common/SceneGuide'\r\nimport {FaMinus, FaPen, FaSquare} from 'react-icons/fa'\r\n\r\nexport default function FilterRecord({record, index, isSelected, removeItem, selectItem, updateItem}) {\r\n    var fromDates = record.From.split(\":\");\r\n    var toDates = record.To.split(\":\");\r\n    const [state, setState] = useState({\r\n        fh : fromDates[0],\r\n        fm : fromDates[1],\r\n        fs : fromDates[2],\r\n        th : toDates[0],\r\n        tm : toDates[1],\r\n        ts : toDates[2],\r\n        type : record.Type,\r\n        intensity : record.Intensity\r\n    });\r\n\r\n    const inputChange = (e) => {\r\n        const newState = {...state, [e.target.name]:e.target.value};\r\n        setState(newState);\r\n        const from = newState.fh + \":\" + newState.fm + \":\" + newState.fs;\r\n        const to = newState.th + \":\" + newState.tm + \":\" + newState.ts;\r\n        const type = newState.type;\r\n        const intensity = newState.intensity;\r\n        record.From = from;\r\n        record.To = to;\r\n        record.Type = type;\r\n        record.Intensity = intensity;\r\n    }\r\n\r\n    const onRemove = () => {\r\n        removeItem(record);\r\n    }\r\n\r\n    const onSelect = () => {\r\n        selectItem(record);\r\n    }\r\n\r\n    const onBlur = () => {\r\n        updateItem(record);\r\n    }\r\n\r\n    return (\r\n        <tr>\r\n            <td>\r\n                <input onBlurCapture={onBlur} onChange={inputChange} className='bk'     name='fh' value={state.fh} />&nbsp;:&nbsp;\r\n                <input onBlurCapture={onBlur} onChange={inputChange} className='bk'     name='fm' value={state.fm} />&nbsp;:&nbsp;\r\n                <input onBlurCapture={onBlur} onChange={inputChange} className='bkLong' name='fs' value={state.fs} />\r\n            </td>\r\n            <td>\r\n                <input onBlurCapture={onBlur} onChange={inputChange}  className='bk'     name='th' value={state.th} />&nbsp;:&nbsp;\r\n                <input onBlurCapture={onBlur} onChange={inputChange}  className='bk'     name='tm' value={state.tm} />&nbsp;:&nbsp;\r\n                <input onBlurCapture={onBlur} onChange={inputChange}  className='bkLong' name='ts' value={state.ts} />\r\n            </td>\r\n            <td>\r\n                <select className='selectType' onBlurCapture={onBlur} onChange={inputChange} name='type' value={state.type}>\r\n                        <option value={SceneType.Violence}  selected={record.Type === SceneType.Violence}>{SceneType.Violence}</option>\r\n                        <option value={SceneType.Nudity}    selected={record.Type === SceneType.Nudity}>{SceneType.Nudity}</option>\r\n                        <option value={SceneType.Profanity} selected={record.Type === SceneType.Profanity}>{SceneType.Profanity}</option>\r\n                </select>\r\n            </td>\r\n            <td>\r\n                <select className='selectType' onBlurCapture={onBlur} onChange={inputChange} name='intensity' value={state.intensity}>\r\n                        <option value={SceneIntensity.Low}   selected={record.Intensity === SceneIntensity.Low}>{SceneIntensity.Low}</option>\r\n                        <option value={SceneIntensity.High}  selected={record.Intensity === SceneIntensity.High}>{SceneIntensity.High}</option>\r\n                </select>\r\n            </td >\r\n            <td>\r\n            <div className='container remove' onClick={onRemove} style={{margin:'0 auto'}}>\r\n                <FaMinus className='middle'/>\r\n            </div>\r\n            </td>\r\n            <td>\r\n            <div className='container select' onClick={onSelect} style={{margin:'0 auto'}}>\r\n                {isSelected ? <FaPen className='middle'/> : <FaSquare className='middle'/>} \r\n            </div>\r\n            </td>\r\n        </tr >\r\n    )\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport { FaSave, FaPlus, FaFastForward, FaFastBackward } from 'react-icons/fa'\r\nimport FilterRecord from './FilterRecord'\r\nimport { SceneGuideRecord, SceneGuideClass } from '../../common/SceneGuide'\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { selectTime, selectRecords, selectVideoName, selectModalOpen } from '../../redux/selectors';\r\nimport { addFilterItems, removeFilterIndex, removeAllFilters, updateFilterItem } from '../../redux/actions';\r\nimport {FaMinus} from 'react-icons/fa'\r\n\r\nimport './style.css'\r\n\r\nconst KEY = {\r\n    N: 78,\r\n    S: 83,\r\n    OPEN_BRACKET: 219,\r\n    CLOSE_BRACKET: 221,\r\n\r\n};\r\n\r\nfunction FilterFileEditor({ records, time, videoName, addFilterItems, removeFilterIndex, removeAllFilters, updateFilterItem, modalOpen }) {\r\n    const [selectedRecord, setSelectedRecord] = useState(null);\r\n    const [key, setKey] = useState(0);\r\n    const [keyEvent, setKeyEvent] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if(modalOpen || !keyEvent) return;\r\n        switch (keyEvent.keyCode) {\r\n            case KEY.N:\r\n                {\r\n                    addItem();\r\n                }\r\n                break;\r\n            case KEY.S:\r\n                {\r\n                    if (keyEvent.ctrlKey)\r\n                    {\r\n                        saveItems();\r\n                    }\r\n                    else\r\n                    {\r\n                        selectItem(records[0]);\r\n                    }\r\n                }\r\n                break;\r\n            case KEY.OPEN_BRACKET:\r\n                {\r\n                    selectime(\"from\");\r\n                }\r\n                break;\r\n            case KEY.CLOSE_BRACKET:\r\n                {\r\n                    selectime(\"to\");\r\n                }\r\n                break;\r\n        }\r\n    }, [keyEvent]);\r\n\r\n    useEffect(() => {\r\n        const KEY = {\r\n            N: 78,\r\n            S: 83,\r\n            OPEN_BRACKET: 219,\r\n            CLOSE_BRACKET: 221,\r\n\r\n        };\r\n        const handleKeyDown = (e) => {\r\n            setKeyEvent(e);\r\n        }\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => {\r\n            window.removeEventListener('keydown', handleKeyDown);\r\n        }\r\n    }, []);\r\n\r\n    const addItem = () => {\r\n        const newRecords = [new SceneGuideRecord()];\r\n        addFilterItems(newRecords);\r\n        setKey(key + 1);\r\n        return newRecords;\r\n    }\r\n\r\n    const removeAll = () => {\r\n        removeAllFilters();\r\n    }\r\n\r\n    const removeItem = (record) => {\r\n        const index = records.indexOf(record);\r\n        if (index === -1) return;\r\n\r\n        removeFilterIndex(index);\r\n        setKey(key + 1);\r\n    }\r\n\r\n    const selectItem = (record) => {\r\n        const index = records.indexOf(record);\r\n        if (index === -1) {\r\n            setSelectedRecord(null);\r\n            return;\r\n        }\r\n\r\n        if (records[index] === selectedRecord) {\r\n            setSelectedRecord(null);\r\n        }\r\n        else {\r\n            setSelectedRecord(record);\r\n        }\r\n    }\r\n\r\n    const selectime = (position) => {\r\n        if (!selectedRecord) return;\r\n\r\n        const index = records.indexOf(selectedRecord);\r\n        if (index === -1) return;\r\n\r\n        if (position === 'from') {\r\n            selectedRecord.setFromTime(time);\r\n        }\r\n        else {\r\n            selectedRecord.setToTime(time);\r\n        }\r\n        updateItem(selectedRecord, index);\r\n    }\r\n\r\n    const updateItem = (record, index) => {\r\n        if (!record || index === -1) return;\r\n        updateFilterItem(record, index);\r\n        setKey(key + 1);\r\n    }\r\n\r\n    const saveItems = () => {\r\n        const element = document.createElement(\"a\");\r\n        const file = new Blob([SceneGuideClass.ToString(records)], { type: 'text/plain' });\r\n        element.href = URL.createObjectURL(file);\r\n        element.download = videoName+\".txt\";\r\n        document.body.appendChild(element); // Required for this to work in FireFox\r\n        element.click();\r\n    }\r\n\r\n    return (\r\n        <div className='editor-container'>\r\n            <div className='container' onClick={addItem}>\r\n                <FaPlus className='middle' />\r\n            </div>\r\n            <div className='container' onClick={saveItems}>\r\n                <FaSave className='middle' />\r\n            </div>\r\n            <div className='container' onClick={() => selectime('from')}>\r\n                <FaFastBackward className='middle' style={!selectedRecord ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}} />\r\n            </div>\r\n            <div className='container' onClick={() => selectime('to')}>\r\n                <FaFastForward className='middle' style={!selectedRecord ? { pointerEvents: \"none\", opacity: \"0.4\" } : {}} />\r\n            </div>\r\n            <div className='container red' onClick={() => removeAll('to')}>\r\n                <FaMinus className='middle' />\r\n            </div>\r\n            <br /><br />\r\n            <div className='table-container' key={key}>\r\n                <table>\r\n                    <tr>\r\n                        <th>From</th>\r\n                        <th>To</th>\r\n                        <th>Type</th>\r\n                        <th>Intensity</th>\r\n                    </tr>\r\n                    {\r\n                        records.map((record, index) => {\r\n                            return <FilterRecord\r\n                                index={index}\r\n                                record={record}\r\n                                isSelected={selectedRecord === record}\r\n                                removeItem={removeItem}\r\n                                updateItem={updateItem}\r\n                                selectItem={selectItem} />\r\n                        })\r\n                    }\r\n                </table>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    const records = selectRecords(state);\r\n    const videoName = selectVideoName(state);\r\n    const time = selectTime(state);\r\n    const modalOpen = selectModalOpen(state);\r\n    return { records, time, videoName, modalOpen };\r\n};\r\n\r\nexport default connect(mapStateToProps, { addFilterItems, removeFilterIndex, removeAllFilters, updateFilterItem })(FilterFileEditor);","import FilterFileEditor from './FilterFileEditor'\r\nexport default FilterFileEditor;","import React from 'react'\r\n\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { PLAYER_ACTION} from '../../redux/actionTypes'\r\nimport { selectPlayerConfig } from '../../redux/selectors';\r\nimport { setPlayerConfig } from '../../redux/actions';\r\n\r\n\r\nimport './style.css'\r\n\r\nfunction ConfigEditor({playerConfig, setPlayerConfig}) {\r\n\r\n    const onChange = (e) => {\r\n        let secondValue = playerConfig.violence[1];\r\n        if(e.target.name == 'nudity') secondValue = playerConfig.nudity[1];\r\n        else if(e.target.name == 'profanity') secondValue = playerConfig.profanity[1];\r\n        setPlayerConfig({[e.target.name]: [e.target.value, secondValue]});\r\n    }\r\n\r\n    const onChange2 = (e) => {\r\n        let firstValue = playerConfig.violence[0];\r\n        if(e.target.name == 'nudity') firstValue = playerConfig.nudity[0];\r\n        else if(e.target.name == 'profanity') firstValue = playerConfig.profanity[0];\r\n        setPlayerConfig({[e.target.name]: [firstValue, e.target.value]});\r\n    }\r\n\r\n    const options_video = [\r\n        <option value={PLAYER_ACTION.BLUR}>{PLAYER_ACTION.BLUR}</option>,\r\n        <option value={PLAYER_ACTION.BLUR_EXTRA}>{PLAYER_ACTION.BLUR_EXTRA}</option>,\r\n        <option value={PLAYER_ACTION.BLUR_EXTREME}>{PLAYER_ACTION.BLUR_EXTREME}</option>,\r\n        <option value={PLAYER_ACTION.BLUR_EXTREME_X2}>{PLAYER_ACTION.BLUR_EXTREME_X2}</option>,\r\n        <option value={PLAYER_ACTION.BLACK}>{PLAYER_ACTION.BLACK}</option>,\r\n        <option value={PLAYER_ACTION.SKIP}>{PLAYER_ACTION.SKIP}</option>,\r\n        <option value={PLAYER_ACTION.NOACTION}>{PLAYER_ACTION.NOACTION}</option>\r\n    ];\r\n\r\n    const options_audio = [\r\n        <option value={PLAYER_ACTION.MUTE}>{PLAYER_ACTION.MUTE}</option>,\r\n        <option value={PLAYER_ACTION.NOACTION}>{PLAYER_ACTION.NOACTION}</option>\r\n    ];\r\n\r\n    return (\r\n        <div className='config'>\r\n            <div className='item'>\r\n                <span>Violence</span>\r\n                <select onChange={onChange} name='violence' value={playerConfig.violence[0]}>\r\n                    {options_video.map((option) => option)}\r\n                </select>\r\n                <select onChange={onChange2} name='violence' value={playerConfig.violence[1]}>\r\n                    {options_audio.map((option) => option)}\r\n                </select>\r\n            </div>\r\n\r\n            <div className='item'>\r\n                <span>Nudity</span>\r\n                <select onChange={onChange} name='nudity' value={playerConfig.nudity[0]}>\r\n                    {options_video.map((option) => option)}\r\n                </select>\r\n                <select onChange={onChange2} name='nudity' value={playerConfig.nudity[1]}>\r\n                    {options_audio.map((option) => option)}\r\n                </select>\r\n            </div>\r\n\r\n            <div className='item'>\r\n                <span>Profanity</span>\r\n                <select onChange={onChange} name='profanity' value={playerConfig.profanity[0]}>\r\n                    {options_video.map((option) => option)}\r\n                </select>\r\n                <select onChange={onChange2} name='profanity' value={playerConfig.profanity[1]}>\r\n                    {options_audio.map((option) => option)}\r\n                </select>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    const playerConfig = selectPlayerConfig(state);\r\n    return { playerConfig };\r\n  };\r\n\r\nexport default connect(mapStateToProps, { setPlayerConfig })(ConfigEditor);","import ConfigEditor from './ConfigEditor'\r\nexport default ConfigEditor;","import ToggleButton from './ToggleButton'\r\nexport default ToggleButton;","import React from 'react'\r\nimport './style.css'\r\n\r\nexport default function ToggleButton({on, onClick, children}) {\r\n    return (\r\n        <div className='toggle-container'>\r\n            <label class=\"switch\">\r\n                <input type=\"checkbox\" checked={!!on}  onClick={onClick}/>\r\n                <span class=\"slider round\"></span>\r\n            </label>\r\n            <div className='title'>{children}</div>\r\n        </div>\r\n    )\r\n}\r\n","import './App.css';\r\nimport React, { useState, useEffect, useRef, Fragment } from 'react'\r\nimport { Player } from './Components/Player';\r\n\r\n\r\nimport Menu from './Components/Menu'\r\nimport SrtClass from './common/SrtClass'\r\nimport FilterEditor from './Components/FilterFileEditor'\r\nimport ConfigEditor from './Components/ConfigEditor'\r\nimport { SceneGuideClass } from './common/SceneGuide'\r\nimport ToggleButton from './Components/ToggleButton'\r\n\r\n\r\nimport { connect } from \"react-redux\";\r\nimport { addFilterItems, setVideoSrc, setSubtitle, setFilterItems, setDuration, setTime, setVideoName } from './redux/actions'\r\nimport { selectModalOpen, selectVideoIsLoading } from './redux/selectors'\r\nimport Loader from './Components/Loader';\r\n\r\nconst KEY = {\r\n  E: 69,\r\n  C: 67,\r\n};\r\n\r\nfunction App(props) {\r\n\r\n  const videoSample = 'video/joker/v.webm'\r\n  const filterSample = 'video/joker/f.txt'\r\n  const subtitleSample = 'video/joker/s.srt'\r\n\r\n  const { addFilterItems, setVideoSrc, setVideoName, setSubtitle, modalOpen, isLoading, setDuration, setTime } = props;\r\n  const [showEditor, setShowEditor] = useState(false);\r\n  const [showConfig, setShowConfig] = useState(false);\r\n  const [forceupdate, setForceUpdate] = useState(0);\r\n  const [keyEvent, setKeyEvent] = useState(null);\r\n\r\n  const ref = useRef(null);\r\n\r\n  const loadAll = () => {\r\n    let videoURL = '';\r\n    let subtitleURL = '';\r\n    let filterURL = '';\r\n    const paramsURL = window.location.hash;\r\n\r\n    const params = paramsURL.split('/');\r\n    if (params.length == 0 || (params.length == 1 && params[0].length == 0)) return;\r\n    if (paramsURL != '/' && params.length >= 2) {\r\n      if (params[1] && params[1].length > 0) {\r\n        videoURL = atob(params[1]);\r\n      }\r\n      if (params[2] && params[2].length > 0) {\r\n        subtitleURL = atob(params[2]);\r\n      }\r\n      if (params[3] && params[3].length > 0) {\r\n        filterURL = atob(params[3]);\r\n      }\r\n    }\r\n\r\n    if(videoURL){\r\n      const fileName = videoURL.replace(/^.*[\\\\\\/]/, '') || 'sample';\r\n      setVideoSrc(videoURL);\r\n      setVideoName(fileName);\r\n    }\r\n\r\n    if (subtitleURL.toLowerCase().startsWith('http')) {\r\n      SrtClass.ReadFile(subtitleURL).then((records) => {\r\n        setSubtitle(records)\r\n      });\r\n    } else {\r\n      setSubtitle([]);\r\n    }\r\n\r\n    if (filterURL.toLowerCase().startsWith('http')) {\r\n      SceneGuideClass.ReadFile(filterURL).then((records) => {\r\n        addFilterItems(records);\r\n      });\r\n    } else {\r\n      setFilterItems([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadAll();\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    window.onhashchange = () => {\r\n      loadAll();\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const { modalOpen } = props;\r\n    if (modalOpen || !keyEvent) return;\r\n    switch (keyEvent.keyCode) {\r\n      case KEY.E:\r\n        setShowEditor(!showEditor);\r\n        break;\r\n      case KEY.C:\r\n        setShowConfig(!showConfig);\r\n        break;\r\n    }\r\n  }, [keyEvent]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      setKeyEvent(e);\r\n    }\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    }\r\n  }, [showEditor, showConfig]);\r\n\r\n  return (\r\n    <div className=\"App\" ref={ref}>\r\n      <Menu />\r\n      {isLoading &&\r\n        <div style={{ position: 'absolute', left: '50%', top: '50%', transform: 'translateX(-50%) translateY(-50%);' }}><Loader /></div>\r\n      }\r\n      <div style={{ opacity: isLoading ? 0 : 1 }}>\r\n        <div style={{ width: '100%', margin: '0 auto', marginTop: '32px' }}>\r\n          <Player />\r\n        </div>\r\n        <ToggleButton on={showEditor} onClick={() => { setShowEditor(!showEditor) }}>Editor</ToggleButton>\r\n        <ToggleButton on={showConfig} onClick={() => { setShowConfig(!showConfig) }}>Config</ToggleButton>\r\n        {showEditor &&\r\n          <div className='filter-container'>\r\n            <FilterEditor />\r\n          </div>\r\n        }\r\n        {showConfig &&\r\n          <div className='config-container'>\r\n            <ConfigEditor />\r\n          </div>\r\n        }\r\n      </div>\r\n    </div >\r\n  );\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  const modalOpen = selectModalOpen(state);\r\n  const isLoading = selectVideoIsLoading(state);\r\n  return { modalOpen, isLoading };\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  { addFilterItems, setVideoSrc, setSubtitle, setDuration, setTime, setVideoName }\r\n)(App);\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from 'react-redux';\r\nimport store from './redux/store';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n    <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}